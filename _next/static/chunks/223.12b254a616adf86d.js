"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[223],{18660:(e,t,r)=>{function n(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}function i(e){if(e.length<8192)return btoa(String.fromCharCode(...e));let t="";for(var r=0;r<e.length;r+=8192)t+=String.fromCharCode(...e.slice(r,r+8192));return btoa(t)}r.d(t,{Ey:()=>n,nk:()=>i})},25616:(e,t,r)=>{r.d(t,{AP:()=>a,fN:()=>l,n4:()=>i,qD:()=>o,t4:()=>u,wn:()=>s});var n=r(56572);function i(e){try{return 32===(0,n.n3)(e).length}catch(e){return!1}}let s=32;function a(e){var t,r;return t=e,/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2==0&&(r=e,(/^(0x|0X)/.test(r)?(r.length-2)/2:r.length/2)===s)}function o(e){return a(e)}function u(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(2*s,"0")}`}function l(e,t=!1){return u(e,t)}},48223:(e,t,r)=>{r.r(t),r.d(t,{CryptoWalletConnectionHandler:()=>p,ShowDynamicModal:()=>g});var n=r(41918),i=r(31669),s=r(36652),a=r(35118),o=r(91578),u=r(25388),l=r(38438),c=r(94606),d=r(12115),h=r(95155);function p(e){let{iframeClient:t,apiKeyEnvironment:r}=e;return(0,h.jsx)(s.a,{apiKeyEnvironment:r,settings:{walletConnectors:[o.b3,l.IH,c.Nu],events:{onAuthFlowCancel(){console.log("[CryptoWalletConnectionHandler] onAuthFlowCancel"),null==t||t.send("crypto:connect-wallet.failed",{error:"Wallet connection was cancelled"})},onAuthFlowClose(){console.log("[CryptoWalletConnectionHandler] onAuthFlowClose")},onAuthFailure(e,t){console.error("[CryptoWalletConnectionHandler] onAuthFailure",e,t)},onAuthSuccess(e){console.log("[CryptoWalletConnectionHandler] onAuthSuccess",e)}},handlers:{handleConnectedWallet:e=>(0,n.d)(this,null,function*(){var n,s;let o;console.log("[CryptoWalletConnectionHandler] handleConnectedWallet",e);let u=e.address;if(!u)return console.error("[CryptoWalletConnectionHandler] Failed to connect wallet: Could not retrieve wallet address"),null==t||t.send("crypto:connect-wallet.failed",{error:"Could not retrieve wallet address. Please ensure your wallet is properly connected and try again."}),!1;try{o=yield(0,i.b)(e)}catch(s){if(s instanceof i.a){let i="production"===r?"ethereum":"ethereum-sepolia",u=(0,a.b)(i);try{yield null==(n=null==e?void 0:e.connector)?void 0:n.switchNetwork({networkChainId:u}),o=i}catch(e){return console.error(`[CryptoWalletConnectionHandler] Failed to switch to default chain ${u}`,e),null==t||t.send("crypto:connect-wallet.failed",{error:`Chain with id ${s.chainId} is not supported. Please change the network in your wallet and try again.`}),!1}}else throw s}return null==t||t.send("crypto:connect-wallet.success",{address:u,chain:o,walletProviderKey:null==(s=e.connector)?void 0:s.key}),!0})}},children:(0,h.jsx)(f,(0,n.a)({},e))})}function f({iframeClient:e}){let[t,i]=(0,d.useState)(!1),{primaryWallet:s}=(0,u.Ww)();return(0,d.useEffect)(()=>{if(null==e)return;let t=e.on("crypto:connect-wallet.show",({show:e})=>{i(e)});return()=>{e.off(t)}},[e]),(0,d.useEffect)(()=>{if(null==e)return;let t=e.on("crypto:send-transaction",t=>(0,n.d)(this,[t],function*({chain:t,serializedTransaction:i}){if(null==s){console.error("[CryptoWalletConnectionHandler] signTransaction: primaryWallet is missing"),e.send("crypto:send-transaction:failed",{error:"primaryWallet is missing"});return}yield function(e,t,i,s){return(0,n.d)(this,null,function*(){let a={chain:t,serializedTransaction:i,iframeClient:s};switch(e.chain){case"EVM":let{handleEvmTransaction:o}=yield r.e(858).then(r.bind(r,77858));return yield o((0,n.b)((0,n.a)({},a),{primaryWallet:e}));case"SOL":let{handleSolanaTransaction:u}=yield r.e(514).then(r.bind(r,80514));return yield u((0,n.b)((0,n.a)({},a),{primaryWallet:e}));case"SUI":let{handleSuiTransaction:l}=yield r.e(531).then(r.bind(r,82531));return yield l((0,n.b)((0,n.a)({},a),{primaryWallet:e}));default:throw Error(`Connected wallet is on an unsupported chain: ${e.chain}`)}})}(s,t,i,e)}));return()=>{e.off(t)}},[e,s]),t?(0,h.jsx)(g,{setShowDynamicModal:i}):null}function g({setShowDynamicModal:e}){let t=(0,d.useContext)(u.zB);if(null==t)throw Error("DynamicContext is missing");let{setShowAuthFlow:r,handleLogOut:i}=t;return(0,d.useEffect)(()=>{var t;null==(t=document.getElementById("crossmint-focus-target"))||t.focus(),(0,n.d)(this,null,function*(){yield i(),r(!0,{clearErrors:!0,emitCancelAuth:!0,ignoreIfIsEmbeddedWidget:!0,initializeWalletConnect:!0,performMultiWalletChecks:!1}),e(!1)})},[]),null}},54481:(e,t,r)=>{function n(e){let t=e.startsWith("0x")?e.slice(2):e,r=t.length%2==0?t:`0${t}`,n=r.match(/[0-9a-fA-F]{2}/g)?.map(e=>parseInt(e,16))??[];if(n.length!==r.length/2)throw Error(`Invalid hex string ${e}`);return Uint8Array.from(n)}function i(e){return e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}r.d(t,{aD:()=>n,nj:()=>i})},56572:(e,t,r)=>{var n;function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function a(e,t){if("string"!=typeof t)throw Error(`${e}: string expected`);return!0}function o(e){if(!Number.isSafeInteger(e))throw Error(`invalid integer: ${e}`)}function u(e){if(!Array.isArray(e))throw Error("array expected")}function l(e,t){if(!s(!0,t))throw Error(`${e}: array of strings expected`)}function c(e,t){if(!s(!1,t))throw Error(`${e}: array of numbers expected`)}function d(...e){let t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function h(e){let t="string"==typeof e?e.split(""):e,r=t.length;l("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(u(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]})),decode:t=>(u(t),t.map(t=>{a("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}function p(e=""){return a("join",e),{encode:t=>(l("join.decode",t),t.join(e)),decode:t=>(a("join.decode",t),t.split(e))}}function f(e,t,r){if(t<2)throw Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(u(e),!e.length)return[];let n=0,i=[],s=Array.from(e,e=>{if(o(e),e<0||e>=t)throw Error(`invalid integer: ${e}`);return e}),a=s.length;for(;;){let e=0,o=!0;for(let i=n;i<a;i++){let a=s[i],u=t*e,l=u+a;if(!Number.isSafeInteger(l)||u/t!==e||l-a!==u)throw Error("convertRadix: carry overflow");let c=l/r;e=l%r;let d=Math.floor(c);if(s[i]=d,!Number.isSafeInteger(d)||d*r+e!==l)throw Error("convertRadix: carry overflow");o&&(d?o=!1:n=i)}if(i.push(e),o)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}r.d(t,{n3:()=>I,gT:()=>O});let g=(e,t)=>0===t?e:g(t,e%t),m=(e,t)=>e+(t-g(e,t)),y=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function b(e,t,r,n){if(u(e),t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(m(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${m(t,r)}`);let i=0,s=0,a=y[t],l=y[r]-1,c=[];for(let n of e){if(o(n),n>=a)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,s+t>32)throw Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=r;s-=r)c.push((i>>s-r&l)>>>0);let e=y[s];if(void 0===e)throw Error("invalid carry");i&=e-1}if(i=i<<r-s&l,!n&&s>=t)throw Error("Excess padding");if(!n&&i>0)throw Error(`Non-zero padding: ${i}`);return n&&s>0&&c.push(i>>>0),c}let v="function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64,w=d((n=58,o(58),{encode:e=>{if(!i(e))throw Error("radix.encode input should be Uint8Array");return f(Array.from(e),256,58)},decode:e=>(c("radix.decode",e),Uint8Array.from(f(e,58,256)))}),h("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),p("")),k=d(h("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),p("")),S=[0x3b6a57b2,0x26508e6d,0x1ea119fa,0x3d4233dd,0x2a1462b3];function j(e){let t=e>>25,r=(0x1ffffff&e)<<5;for(let e=0;e<S.length;e++)(t>>e&1)==1&&(r^=S[e]);return r}let E="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,O=e=>w.encode(e),I=e=>w.decode(e)},88784:(e,t,r)=>{r.d(t,{Z:()=>rU,b:()=>rC});var n,i,s,a,o,u,l,c,d,h,p,f,g,m,y,b,v,w=r(18660),k=r(56572),S=r(54481);function j(e){let t=[],r=0;if(0===e)return[0];for(;e>0;)t[r]=127&e,(e>>=7)&&(t[r]|=128),r+=1;return t}class E{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32();return BigInt("0x"+(this.read32().toString(16)+e.toString(16).padStart(8,"0"))).toString(10)}read128(){let e=BigInt(this.read64());return BigInt("0x"+(BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0"))).toString(10)}read256(){let e=BigInt(this.read128());return BigInt("0x"+(BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0"))).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),r}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,{value:t,length:r}=function(e){let t=0,r=0,n=0;for(;;){let i=e[n];if(n+=1,t|=(127&i)<<r,(128&i)==0)break;r+=7}return{value:t,length:n}}(new Uint8Array(this.dataView.buffer,e));return this.shift(r),t}readVec(e){let t=this.readULEB(),r=[];for(let n=0;n<t;n++)r.push(e(this,n,t));return r}}class O{constructor({initialSize:e=1024,maxSize:t=1/0,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){let t=this.bytePosition+e;if(t>this.size){let e=Math.min(this.maxSize,this.size+this.allocateSize);if(t>e)throw Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=e;let r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return I(BigInt(e),8).forEach(e=>this.write8(e)),this}write128(e){return I(BigInt(e),16).forEach(e=>this.write8(e)),this}write256(e){return I(BigInt(e),32).forEach(e=>this.write8(e)),this}writeULEB(e){return j(e).forEach(e=>this.write8(e)),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach((r,n)=>t(this,r,n,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return function(e,t){switch(t){case"base58":return(0,k.gT)(e);case"base64":return(0,w.nk)(e);case"hex":return(0,S.nj)(e);default:throw Error("Unsupported encoding, supported values are: base64, hex")}}(this.toBytes(),e)}}function I(e,t){let r=new Uint8Array(t),n=0;for(;e>0;)r[n]=Number(e%BigInt(256)),e/=BigInt(256),n+=1;return r}var x=e=>{throw TypeError(e)},C=(e,t,r)=>t.has(e)||x("Cannot "+r),M=(e,t,r)=>(C(e,t,"read from private field"),r?r.call(e):t.get(e)),T=(e,t,r)=>t.has(e)?x("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),P=(e,t,r,n)=>(C(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);let A=class e{constructor(e){T(this,n),T(this,i),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),P(this,n,e.write),P(this,i,e.serialize??((e,t)=>{let r=new O({initialSize:this.serializedSize(e)??void 0,...t});return M(this,n).call(this,e,r),r.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),M(this,n).call(this,e,t)}serialize(e,t){return this.validate(e),new B(this,M(this,i).call(this,e,t))}parse(e){let t=new E(e);return this.read(t)}fromHex(e){return this.parse((0,S.aD)(e))}fromBase58(e){return this.parse((0,k.n3)(e))}fromBase64(e){return this.parse((0,w.Ey)(e))}transform({name:t,input:r,output:s,validate:a}){return new e({name:t??this.name,read:e=>s?s(this.read(e)):this.read(e),write:(e,t)=>M(this,n).call(this,r?r(e):e,t),serializedSize:e=>this.serializedSize(r?r(e):e),serialize:(e,t)=>M(this,i).call(this,r?r(e):e,t),validate:e=>{a?.(e),this.validate(r?r(e):e)}})}};n=new WeakMap,i=new WeakMap;let U=Symbol.for("@mysten/serialized-bcs");function $(e){return!!e&&"object"==typeof e&&!0===e[U]}class B{constructor(e,t){T(this,s),T(this,a),P(this,s,e),P(this,a,t)}get[U](){return!0}toBytes(){return M(this,a)}toHex(){return(0,S.nj)(M(this,a))}toBase64(){return(0,w.nk)(M(this,a))}toBase58(){return(0,k.gT)(M(this,a))}parse(){return M(this,s).parse(M(this,a))}}function N({size:e,...t}){return new A({...t,serializedSize:()=>e})}function z({readMethod:e,writeMethod:t,...r}){return N({...r,read:t=>t[e](),write:(e,r)=>r[t](e),validate:e=>{if(e<0||e>r.maxValue)throw TypeError(`Invalid ${r.name} value: ${e}. Expected value in range 0-${r.maxValue}`);r.validate?.(e)}})}function D({readMethod:e,writeMethod:t,...r}){return N({...r,read:t=>t[e](),write:(e,r)=>r[t](BigInt(e)),validate:e=>{let t=BigInt(e);if(t<0||t>r.maxValue)throw TypeError(`Invalid ${r.name} value: ${t}. Expected value in range 0-${r.maxValue}`);r.validate?.(t)}})}s=new WeakMap,a=new WeakMap;function R(e){return{lang:e?.lang??o?.lang,message:e?.message,abortEarly:e?.abortEarly??o?.abortEarly,abortPipeEarly:e?.abortPipeEarly??o?.abortPipeEarly}}function _(e){let t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function V(e,t,r,n,i){var s,a,o,d;let h=i&&"input"in i?i.input:r.value,p=i?.expected??e.expects??null,f=i?.received??_(h),g={kind:e.kind,type:e.type,input:h,expected:p,received:f,message:`Invalid ${t}: ${p?`Expected ${p} but r`:"R"}eceived ${f}`,requirement:e.requirement,path:i?.path,issues:i?.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},m="schema"===e.kind,y=i?.message??e.message??(s=e.reference,a=g.lang,c?.get(s)?.get(a))??(m?(o=g.lang,l?.get(o)):null)??n.message??(d=g.lang,u?.get(d));y&&(g.message="function"==typeof y?y(g):y),m&&(r.typed=!1),r.issues?r.issues.push(g):r.issues=[g]}var W=/\D/gu,q=class extends Error{issues;constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function F(e,t){return{kind:"validation",type:"check",reference:F,async:!1,expects:null,requirement:e,message:t,_run(e,t){return e.typed&&!this.requirement(e.value)&&V(this,"input",e,t),e}}}function L(e){return{kind:"validation",type:"integer",reference:L,async:!1,expects:null,requirement:Number.isInteger,message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&V(this,"integer",e,t),e}}}function G(e){return{kind:"transformation",type:"transform",reference:G,async:!1,operation:e,_run(e){return e.value=this.operation(e.value),e}}}function H(e,t,r){return"function"==typeof e.fallback?e.fallback(t,r):e.fallback}function K(e,t,r){return"function"==typeof e.default?e.default(t,r):e.default}function J(e){if("entries"in e){let t={};for(let r in e.entries)t[r]=J(e.entries[r]);return t}return"items"in e?e.items.map(J):K(e)}async function Y(e){return"entries"in e?Object.fromEntries(await Promise.all(Object.entries(e.entries).map(async([e,t])=>[e,await Y(t)]))):"items"in e?Promise.all(e.items.map(Y)):K(e)}function Z(e){if("entries"in e){let t={};for(let r in e.entries)t[r]=Z(e.entries[r]);return t}return"items"in e?e.items.map(Z):H(e)}async function Q(e){return"entries"in e?Object.fromEntries(await Promise.all(Object.entries(e.entries).map(async([e,t])=>[e,await Q(t)]))):"items"in e?Promise.all(e.items.map(Q)):H(e)}function X(e,t){return!e._run({typed:!1,value:t},{abortEarly:!0}).issues}function ee(e,t){return{kind:"schema",type:"array",reference:ee,expects:"Array",async:!1,item:e,message:t,_run(e,t){let r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<r.length;n++){let i=r[n],s=this.item._run({typed:!1,value:i},t);if(s.issues){let a={type:"array",origin:"value",input:r,key:n,value:i};for(let t of s.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.push(s.value)}}else V(this,"type",e,t);return e}}}function et(e){return{kind:"schema",type:"bigint",reference:et,expects:"bigint",async:!1,message:e,_run(e,t){return"bigint"==typeof e.value?e.typed=!0:V(this,"type",e,t),e}}}function er(e){return{kind:"schema",type:"boolean",reference:er,expects:"boolean",async:!1,message:e,_run(e,t){return"boolean"==typeof e.value?e.typed=!0:V(this,"type",e,t),e}}}function en(e){return{kind:"schema",type:"lazy",reference:en,expects:"unknown",async:!1,getter:e,_run(e,t){return this.getter(e.value)._run(e,t)}}}function ei(e,t){return{kind:"schema",type:"literal",reference:ei,expects:_(e),async:!1,literal:e,message:t,_run(e,t){return e.value===this.literal?e.typed=!0:V(this,"type",e,t),e}}}function es(e,...t){let r={kind:"schema",type:"nullable",reference:es,expects:`${e.expects} | null`,async:!1,wrapped:e,_run(e,t){return null===e.value&&("default"in this&&(e.value=K(this,e,t)),null===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function ea(e,...t){let r={kind:"schema",type:"nullish",reference:ea,expects:`${e.expects} | null | undefined`,async:!1,wrapped:e,_run(e,t){return(null===e.value||void 0===e.value)&&("default"in this&&(e.value=K(this,e,t)),null===e.value||void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function eo(e){return{kind:"schema",type:"number",reference:eo,expects:"number",async:!1,message:e,_run(e,t){return"number"!=typeof e.value||isNaN(e.value)?V(this,"type",e,t):e.typed=!0,e}}}function eu(e,t){return{kind:"schema",type:"object",reference:eu,expects:"Object",async:!1,entries:e,message:t,_run(e,t){let r=e.value;if(r&&"object"==typeof r)for(let n in e.typed=!0,e.value={},this.entries){let i=r[n],s=this.entries[n]._run({typed:!1,value:i},t);if(s.issues){let a={type:"object",origin:"value",input:r,key:n,value:i};for(let t of s.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),(void 0!==s.value||n in r)&&(e.value[n]=s.value)}else V(this,"type",e,t);return e}}}function el(e,...t){let r={kind:"schema",type:"optional",reference:el,expects:`${e.expects} | undefined`,async:!1,wrapped:e,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=K(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function ec(e,t,r){return{kind:"schema",type:"record",reference:ec,expects:"Object",async:!1,key:e,value:t,message:r,_run(e,t){let r=e.value;if(r&&"object"==typeof r)for(let i in e.typed=!0,e.value={},r){var n;if(Object.hasOwn(r,n=i)&&"__proto__"!==n&&"prototype"!==n&&"constructor"!==n){let n=r[i],s=this.key._run({typed:!1,value:i},t);if(s.issues){let a={type:"object",origin:"key",input:r,key:i,value:n};for(let t of s.issues)t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}let a=this.value._run({typed:!1,value:n},t);if(a.issues){let s={type:"object",origin:"value",input:r,key:i,value:n};for(let t of a.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}s.typed&&a.typed||(e.typed=!1),s.typed&&(e.value[s.value]=a.value)}}else V(this,"type",e,t);return e}}}function ed(e){return{kind:"schema",type:"string",reference:ed,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:V(this,"type",e,t),e}}}function eh(e,t){return{kind:"schema",type:"tuple",reference:eh,expects:"Array",async:!1,items:e,message:t,_run(e,t){let r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<this.items.length;n++){let i=r[n],s=this.items[n]._run({typed:!1,value:i},t);if(s.issues){let a={type:"array",origin:"value",input:r,key:n,value:i};for(let t of s.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.push(s.value)}}else V(this,"type",e,t);return e}}}function ep(e){let t;if(e)for(let r of e)t?t.push(...r.issues):t=r.issues;return t}function ef(e,t){return{kind:"schema",type:"union",reference:ef,expects:[...new Set(e.map(e=>e.expects))].join(" | ")||"never",async:!1,options:e,message:t,_run(e,t){let r,n,i;for(let s of this.options){let a=s._run({typed:!1,value:e.value},t);if(a.typed){if(a.issues)n?n.push(a):n=[a];else{r=a;break}}else i?i.push(a):i=[a]}if(r)return r;if(n){if(1===n.length)return n[0];V(this,"type",e,t,{issues:ep(n)}),e.typed=!0}else{if(i?.length===1)return i[0];V(this,"type",e,t,{issues:ep(i)})}return e}}}function eg(){return{kind:"schema",type:"unknown",reference:eg,expects:"unknown",async:!1,_run:e=>(e.typed=!0,e)}}function em(e,t,r){let n=e._run({typed:!1,value:t},R(r));if(n.issues)throw new q(n.issues);return n.value}function ey(...e){return{...e[0],pipe:e,_run(t,r){for(let n=0;n<e.length;n++){if(t.issues&&("schema"===e[n].kind||"transformation"===e[n].kind)){t.typed=!1;break}t.issues&&(r.abortEarly||r.abortPipeEarly)||(t=e[n]._run(t,r))}return t}}}var eb=r(25616);function ev(e){return ey(ef(Object.entries(e).map(([e,t])=>eu({[e]:t}))),G(e=>({...e,$kind:Object.keys(e)[0]})))}let ew=ey(ed(),G(e=>(0,eb.t4)(e)),F(eb.AP)),ek=ed(),eS=ey(ef([ed(),ey(eo(),L())]),F(e=>{try{return BigInt(e),BigInt(e)>=0&&0xffffffffffffffffn>=BigInt(e)}catch{return!1}},"Invalid u64")),ej=eu({objectId:ew,version:eS,digest:ed()}),eE=ey(ef([eu({GasCoin:ei(!0)}),eu({Input:ey(eo(),L()),type:el(ei("pure"))}),eu({Input:ey(eo(),L()),type:el(ei("object"))}),eu({Result:ey(eo(),L())}),eu({NestedResult:eh([ey(eo(),L()),ey(eo(),L())])})]),G(e=>({...e,$kind:Object.keys(e)[0]}))),eO=eu({budget:es(eS),price:es(eS),owner:es(ew),payment:es(ee(ej))});eu({address:ed(),module:ed(),name:ed(),typeParams:ee(ed())});let eI=ef([ei("address"),ei("bool"),ei("u8"),ei("u16"),ei("u32"),ei("u64"),ei("u128"),ei("u256"),eu({vector:en(()=>eI)}),eu({datatype:eu({package:ed(),module:ed(),type:ed(),typeParameters:ee(en(()=>eI))})}),eu({typeParameter:ey(eo(),L())})]),ex=eu({ref:es(ef([ei("&"),ei("&mut")])),body:eI}),eC=eu({package:ew,module:ed(),function:ed(),typeArguments:ee(ed()),arguments:ee(eE),_argumentTypes:el(es(ee(ex)))}),eM=eu({name:ed(),inputs:ec(ed(),ef([eE,ee(eE)])),data:ec(ed(),eg())}),eT=ev({MoveCall:eC,TransferObjects:eu({objects:ee(eE),address:eE}),SplitCoins:eu({coin:eE,amounts:ee(eE)}),MergeCoins:eu({destination:eE,sources:ee(eE)}),Publish:eu({modules:ee(ek),dependencies:ee(ew)}),MakeMoveVec:eu({type:es(ed()),elements:ee(eE)}),Upgrade:eu({modules:ee(ek),dependencies:ee(ew),package:ew,ticket:eE}),$Intent:eM}),eP=ev({ImmOrOwnedObject:ej,SharedObject:eu({objectId:ew,initialSharedVersion:eS,mutable:er()}),Receiving:ej}),eA=ev({Object:eP,Pure:eu({bytes:ek}),UnresolvedPure:eu({value:eg()}),UnresolvedObject:eu({objectId:ew,version:el(es(eS)),digest:el(es(ed())),initialSharedVersion:el(es(eS))})}),eU=ev({Object:eP,Pure:eu({bytes:ek})}),e$=ev({None:ei(!0),Epoch:eS}),eB=eu({version:ei(2),sender:ea(ew),expiration:ea(e$),gasData:eO,inputs:ee(eA),commands:ee(eT)});var eN=(e=>(e[e.COMPATIBLE=0]="COMPATIBLE",e[e.ADDITIVE=128]="ADDITIVE",e[e.DEP_ONLY=192]="DEP_ONLY",e))(eN||{});let ez={MoveCall(e){let[t,r="",n=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:r,function:n,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects:(e,t)=>({$kind:"TransferObjects",TransferObjects:{objects:e.map(e=>em(eE,e)),address:em(eE,t)}}),SplitCoins:(e,t)=>({$kind:"SplitCoins",SplitCoins:{coin:em(eE,e),amounts:t.map(e=>em(eE,e))}}),MergeCoins:(e,t)=>({$kind:"MergeCoins",MergeCoins:{destination:em(eE,e),sources:t.map(e=>em(eE,e))}}),Publish:({modules:e,dependencies:t})=>({$kind:"Publish",Publish:{modules:e.map(e=>"string"==typeof e?e:(0,w.nk)(new Uint8Array(e))),dependencies:t.map(e=>(0,eb.fN)(e))}}),Upgrade:({modules:e,dependencies:t,package:r,ticket:n})=>({$kind:"Upgrade",Upgrade:{modules:e.map(e=>"string"==typeof e?e:(0,w.nk)(new Uint8Array(e))),dependencies:t.map(e=>(0,eb.fN)(e)),package:r,ticket:em(eE,n)}}),MakeMoveVec:({type:e,elements:t})=>({$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map(e=>em(eE,e))}}),Intent:({name:e,inputs:t={},data:r={}})=>({$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map(([e,t])=>[e,Array.isArray(t)?t.map(e=>em(eE,e)):em(eE,t)])),data:r}})},eD=/^vector<(.+)>$/,eR=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class e_{static parseFromStr(e,t=!1){if("address"===e)return{address:null};if("bool"===e)return{bool:null};if("u8"===e)return{u8:null};if("u16"===e)return{u16:null};if("u32"===e)return{u32:null};else if("u64"===e)return{u64:null};else if("u128"===e)return{u128:null};else if("u256"===e)return{u256:null};else if("signer"===e)return{signer:null};let r=e.match(eD);if(r)return{vector:e_.parseFromStr(r[1],t)};let n=e.match(eR);if(n)return{struct:{address:t?(0,eb.t4)(n[1]):n[1],module:n[2],name:n[3],typeParams:void 0===n[5]?[]:e_.parseStructTypeArgs(n[5],t)}};throw Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,t=!1){return(function(e,t=["<",">"]){let[r,n]=t,i=[],s="",a=0;for(let t=0;t<e.length;t++){let o=e[t];if(o===r&&a++,o===n&&a--,0===a&&","===o){i.push(s.trim()),s="";continue}s+=o}return i.push(s.trim()),i})(e).map(e=>e_.parseFromStr(e,t))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${e_.tagToString(e.vector)}>`;if("struct"in e){let t=e.struct,r=t.typeParams.map(e_.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${r?`<${r}>`:""}`}throw Error("Invalid TypeTag")}}let eV=eu({digest:ed(),objectId:ed(),version:ef([ey(eo(),L()),ed(),et()])}),eW=ev({ImmOrOwned:eV,Shared:eu({objectId:ew,initialSharedVersion:eS,mutable:er()}),Receiving:eV}),eq=ev({Object:eW,Pure:ee(ey(eo(),L()))}),eF=ef([eu({kind:ei("Input"),index:ey(eo(),L()),value:eg(),type:el(ei("object"))}),eu({kind:ei("Input"),index:ey(eo(),L()),value:eg(),type:ei("pure")})]),eL=ef([eu({Epoch:ey(eo(),L())}),eu({None:es(ei(!0))})]),eG=ey(ef([eo(),ed(),et()]),F(e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}})),eH=ef([eu({bool:es(ei(!0))}),eu({u8:es(ei(!0))}),eu({u64:es(ei(!0))}),eu({u128:es(ei(!0))}),eu({address:es(ei(!0))}),eu({signer:es(ei(!0))}),eu({vector:en(()=>eH)}),eu({struct:en(()=>eK)}),eu({u16:es(ei(!0))}),eu({u32:es(ei(!0))}),eu({u256:es(ei(!0))})]),eK=eu({address:ed(),module:ed(),name:ed(),typeParams:ee(eH)}),eJ=eu({budget:el(eG),price:el(eG),payment:el(ee(eV)),owner:el(ed())}),eY=ef([eF,eu({kind:ei("GasCoin")}),eu({kind:ei("Result"),index:ey(eo(),L())}),eu({kind:ei("NestedResult"),index:ey(eo(),L()),resultIndex:ey(eo(),L())})]),eZ=eu({kind:ei("MoveCall"),target:ey(ed(),F(e=>3===e.split("::").length)),typeArguments:ee(ed()),arguments:ee(eY)}),eQ=eu({kind:ei("TransferObjects"),objects:ee(eY),address:eY}),eX=eu({kind:ei("SplitCoins"),coin:eY,amounts:ee(eY)}),e0=eu({kind:ei("MergeCoins"),destination:eY,sources:ee(eY)}),e1=eu({kind:ei("MakeMoveVec"),type:ef([eu({Some:eH}),eu({None:es(ei(!0))})]),objects:ee(eY)}),e2=eu({kind:ei("Publish"),modules:ee(ee(ey(eo(),L()))),dependencies:ee(ed())}),e6=ef([eZ,eQ,eX,e0,e2,eu({kind:ei("Upgrade"),modules:ee(ee(ey(eo(),L()))),dependencies:ee(ed()),packageId:ed(),ticket:eY}),e1]);function e8(e){let t=e.inputs.map((e,t)=>{if(e.Object)return{kind:"Input",index:t,value:{Object:e.Object.ImmOrOwnedObject?{ImmOrOwned:e.Object.ImmOrOwnedObject}:e.Object.Receiving?{Receiving:{digest:e.Object.Receiving.digest,version:e.Object.Receiving.version,objectId:e.Object.Receiving.objectId}}:{Shared:{mutable:e.Object.SharedObject.mutable,initialSharedVersion:e.Object.SharedObject.initialSharedVersion,objectId:e.Object.SharedObject.objectId}}},type:"object"};if(e.Pure)return{kind:"Input",index:t,value:{Pure:Array.from((0,w.Ey)(e.Pure.bytes))},type:"pure"};if(e.UnresolvedPure)return{kind:"Input",type:"pure",index:t,value:e.UnresolvedPure.value};if(e.UnresolvedObject)return{kind:"Input",type:"object",index:t,value:e.UnresolvedObject.objectId};throw Error("Invalid input")});return{version:1,sender:e.sender??void 0,expiration:e.expiration?.$kind==="Epoch"?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:e.gasData.owner??void 0,budget:e.gasData.budget??void 0,price:e.gasData.price??void 0,payment:e.gasData.payment??void 0},inputs:t,transactions:e.commands.map(e=>{if(e.MakeMoveVec)return{kind:"MakeMoveVec",type:null===e.MakeMoveVec.type?{None:!0}:{Some:e_.parseFromStr(e.MakeMoveVec.type)},objects:e.MakeMoveVec.elements.map(e=>e4(e,t))};if(e.MergeCoins)return{kind:"MergeCoins",destination:e4(e.MergeCoins.destination,t),sources:e.MergeCoins.sources.map(e=>e4(e,t))};if(e.MoveCall)return{kind:"MoveCall",target:`${e.MoveCall.package}::${e.MoveCall.module}::${e.MoveCall.function}`,typeArguments:e.MoveCall.typeArguments,arguments:e.MoveCall.arguments.map(e=>e4(e,t))};if(e.Publish)return{kind:"Publish",modules:e.Publish.modules.map(e=>Array.from((0,w.Ey)(e))),dependencies:e.Publish.dependencies};if(e.SplitCoins)return{kind:"SplitCoins",coin:e4(e.SplitCoins.coin,t),amounts:e.SplitCoins.amounts.map(e=>e4(e,t))};if(e.TransferObjects)return{kind:"TransferObjects",objects:e.TransferObjects.objects.map(e=>e4(e,t)),address:e4(e.TransferObjects.address,t)};if(e.Upgrade)return{kind:"Upgrade",modules:e.Upgrade.modules.map(e=>Array.from((0,w.Ey)(e))),dependencies:e.Upgrade.dependencies,packageId:e.Upgrade.package,ticket:e4(e.Upgrade.ticket,t)};throw Error(`Unknown transaction ${Object.keys(e)}`)})}}function e4(e,t){if("GasCoin"===e.$kind)return{kind:"GasCoin"};if("Result"===e.$kind)return{kind:"Result",index:e.Result};if("NestedResult"===e.$kind)return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if("Input"===e.$kind)return t[e.Input];throw Error(`Invalid argument ${Object.keys(e)}`)}function e3(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function e5(e){return ef(Object.entries(e).map(([e,t])=>eu({[e]:t})))}eu({version:ei(1),sender:el(ed()),expiration:ea(eL),gasConfig:eJ,inputs:ee(eF),transactions:ee(e6)});let e9=e5({GasCoin:ei(!0),Input:ey(eo(),L()),Result:ey(eo(),L()),NestedResult:eh([ey(eo(),L()),ey(eo(),L())])}),e7=eu({budget:es(eS),price:es(eS),owner:es(ew),payment:es(ee(ej))}),te=eu({package:ew,module:ed(),function:ed(),typeArguments:ee(ed()),arguments:ee(e9)}),tt=eu({name:ed(),inputs:ec(ed(),ef([e9,ee(e9)])),data:ec(ed(),eg())}),tr=e5({MoveCall:te,TransferObjects:eu({objects:ee(e9),address:e9}),SplitCoins:eu({coin:e9,amounts:ee(e9)}),MergeCoins:eu({destination:e9,sources:ee(e9)}),Publish:eu({modules:ee(ek),dependencies:ee(ew)}),MakeMoveVec:eu({type:es(ed()),elements:ee(e9)}),Upgrade:eu({modules:ee(ek),dependencies:ee(ew),package:ew,ticket:e9}),$Intent:tt}),tn=e5({ImmOrOwnedObject:ej,SharedObject:eu({objectId:ew,initialSharedVersion:eS,mutable:er()}),Receiving:ej}),ti=e5({Object:tn,Pure:eu({bytes:ek}),UnresolvedPure:eu({value:eg()}),UnresolvedObject:eu({objectId:ew,version:el(es(eS)),digest:el(es(ed())),initialSharedVersion:el(es(eS))})}),ts=e5({None:ei(!0),Epoch:eS}),ta=eu({version:ei(2),sender:ea(ew),expiration:ea(ts),gasData:e7,inputs:ee(ti),commands:ee(tr)}),to={Pure:function(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?(0,w.nk)(e):e.toBase64()}}},ObjectRef:({objectId:e,digest:t,version:r})=>({$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:r,objectId:(0,eb.t4)(e)}}}),SharedObjectRef:({objectId:e,mutable:t,initialSharedVersion:r})=>({$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:r,objectId:(0,eb.t4)(e)}}}),ReceivingRef:({objectId:e,digest:t,version:r})=>({$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:r,objectId:(0,eb.t4)(e)}}})},tu={u8:e=>z({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:255,...e}),u16:e=>z({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:65535,...e}),u32:e=>z({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:0x100000000-1,...e}),u64:e=>D({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e}),u128:e=>D({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e}),u256:e=>D({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e}),bool:e=>N({name:"bool",size:1,read:e=>1===e.read8(),write:(e,t)=>t.write8(+!!e),...e,validate:t=>{if(e?.validate?.(t),"boolean"!=typeof t)throw TypeError(`Expected boolean, found ${typeof t}`)}}),uleb128:e=>(function({serialize:e,...t}){let r=new A({...t,serialize:e,write:(e,t)=>{for(let n of r.serialize(e).toBytes())t.write8(n)}});return r})({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(j(e)),...e}),bytes:(e,t)=>N({name:`bytes[${e}]`,size:e,read:t=>t.readBytes(e),write:(t,r)=>{let n=new Uint8Array(t);for(let t=0;t<e;t++)r.write8(n[t]??0)},...t,validate:r=>{if(t?.validate?.(r),!r||"object"!=typeof r||!("length"in r))throw TypeError(`Expected array, found ${typeof r}`);if(r.length!==e)throw TypeError(`Expected array of length ${e}, found ${r.length}`)}}),byteVector:e=>new A({name:"bytesVector",read:e=>{let t=e.readULEB();return e.readBytes(t)},write:(e,t)=>{let r=new Uint8Array(e);t.writeULEB(r.length);for(let e=0;e<r.length;e++)t.write8(r[e]??0)},...e,serializedSize:e=>{let t="length"in e?e.length:null;return null==t?null:j(t).length+t},validate:t=>{if(e?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw TypeError(`Expected array, found ${typeof t}`)}}),string:e=>(function({toBytes:e,fromBytes:t,...r}){return new A({...r,read:e=>{let r=e.readULEB();return t(e.readBytes(r))},write:(t,r)=>{let n=e(t);r.writeULEB(n.length);for(let e=0;e<n.length;e++)r.write8(n[e])},serialize:t=>{let r=e(t),n=j(r.length),i=new Uint8Array(n.length+r.length);return i.set(n,0),i.set(r,n.length),i},validate:e=>{if("string"!=typeof e)throw TypeError(`Invalid ${r.name} value: ${e}. Expected string`);r.validate?.(e)}})})({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...e}),fixedArray:(e,t,r)=>new A({name:`${t.name}[${e}]`,read:r=>{let n=Array(e);for(let i=0;i<e;i++)n[i]=t.read(r);return n},write:(e,r)=>{for(let n of e)t.write(n,r)},...r,validate:t=>{if(r?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw TypeError(`Expected array, found ${typeof t}`);if(t.length!==e)throw TypeError(`Expected array of length ${e}, found ${t.length}`)}}),option:e=>tu.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:e=>null==e?{None:!0}:{Some:e},output:e=>"Some"===e.$kind?e.Some:null}),vector:(e,t)=>new A({name:`vector<${e.name}>`,read:t=>{let r=t.readULEB(),n=Array(r);for(let i=0;i<r;i++)n[i]=e.read(t);return n},write:(t,r)=>{for(let n of(r.writeULEB(t.length),t))e.write(n,r)},...t,validate:e=>{if(t?.validate?.(e),!e||"object"!=typeof e||!("length"in e))throw TypeError(`Expected array, found ${typeof e}`)}}),tuple:(e,t)=>new A({name:`(${e.map(e=>e.name).join(", ")})`,serializedSize:t=>{let r=0;for(let n=0;n<e.length;n++){let i=e[n].serializedSize(t[n]);if(null==i)return null;r+=i}return r},read:t=>{let r=[];for(let n of e)r.push(n.read(t));return r},write:(t,r)=>{for(let n=0;n<e.length;n++)e[n].write(t[n],r)},...t,validate:r=>{if(t?.validate?.(r),!Array.isArray(r))throw TypeError(`Expected array, found ${typeof r}`);if(r.length!==e.length)throw TypeError(`Expected array of length ${e.length}, found ${r.length}`)}}),struct(e,t,r){let n=Object.entries(t);return new A({name:e,serializedSize:e=>{let t=0;for(let[r,i]of n){let n=i.serializedSize(e[r]);if(null==n)return null;t+=n}return t},read:e=>{let t={};for(let[r,i]of n)t[r]=i.read(e);return t},write:(e,t)=>{for(let[r,i]of n)i.write(e[r],t)},...r,validate:e=>{if(r?.validate?.(e),"object"!=typeof e||null==e)throw TypeError(`Expected object, found ${typeof e}`)}})},enum(e,t,r){let n=Object.entries(t);return new A({name:e,read:t=>{let r=t.readULEB(),i=n[r];if(!i)throw TypeError(`Unknown value ${r} for enum ${e}`);let[s,a]=i;return{[s]:a?.read(t)??!0,$kind:s}},write:(e,r)=>{let[i,s]=Object.entries(e).filter(([e])=>Object.hasOwn(t,e))[0];for(let e=0;e<n.length;e++){let[t,a]=n[e];if(t===i){r.writeULEB(e),a?.write(s,r);return}}},...r,validate:n=>{if(r?.validate?.(n),"object"!=typeof n||null==n)throw TypeError(`Expected object, found ${typeof n}`);let i=Object.keys(n).filter(e=>void 0!==n[e]&&Object.hasOwn(t,e));if(1!==i.length)throw TypeError(`Expected object with one key, but found ${i.length} for type ${e}}`);let[s]=i;if(!Object.hasOwn(t,s))throw TypeError(`Invalid enum variant ${s}`)}})},map:(e,t)=>tu.vector(tu.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:e=>[...e.entries()],output:e=>{let t=new Map;for(let[r,n]of e)t.set(r,n);return t}}),lazy:e=>(function(e){let t=null;function r(){return t||(t=e()),t}return new A({name:"lazy",read:e=>r().read(e),serializedSize:e=>r().serializedSize(e),write:(e,t)=>r().write(e,t),serialize:(e,t)=>r().serialize(e,t).toBytes()})})(e)},tl=tu.bytes(eb.wn).transform({validate:e=>{let t="string"==typeof e?e:(0,S.nj)(e);if(!t||!(0,eb.AP)((0,eb.t4)(t)))throw Error(`Invalid Sui address ${t}`)},input:e=>"string"==typeof e?(0,S.aD)((0,eb.t4)(e)):e,output:e=>(0,eb.t4)((0,S.nj)(e))}),tc=tu.vector(tu.u8()).transform({name:"ObjectDigest",input:e=>(0,k.n3)(e),output:e=>(0,k.gT)(new Uint8Array(e)),validate:e=>{if(32!==(0,k.n3)(e).length)throw Error("ObjectDigest must be 32 bytes")}}),td=tu.struct("SuiObjectRef",{objectId:tl,version:tu.u64(),digest:tc}),th=tu.struct("SharedObjectRef",{objectId:tl,initialSharedVersion:tu.u64(),mutable:tu.bool()}),tp=tu.enum("ObjectArg",{ImmOrOwnedObject:td,SharedObject:th,Receiving:td}),tf=tu.enum("CallArg",{Pure:tu.struct("Pure",{bytes:tu.vector(tu.u8()).transform({input:e=>"string"==typeof e?(0,w.Ey)(e):e,output:e=>(0,w.nk)(new Uint8Array(e))})}),Object:tp}),tg=tu.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:tu.lazy(()=>tg),struct:tu.lazy(()=>tj),u16:null,u32:null,u256:null}),tm=tg.transform({input:e=>"string"==typeof e?e_.parseFromStr(e,!0):e,output:e=>e_.tagToString(e)}),ty=tu.enum("Argument",{GasCoin:null,Input:tu.u16(),Result:tu.u16(),NestedResult:tu.tuple([tu.u16(),tu.u16()])}),tb=tu.struct("ProgrammableMoveCall",{package:tl,module:tu.string(),function:tu.string(),typeArguments:tu.vector(tm),arguments:tu.vector(ty)}),tv=tu.enum("Command",{MoveCall:tb,TransferObjects:tu.struct("TransferObjects",{objects:tu.vector(ty),address:ty}),SplitCoins:tu.struct("SplitCoins",{coin:ty,amounts:tu.vector(ty)}),MergeCoins:tu.struct("MergeCoins",{destination:ty,sources:tu.vector(ty)}),Publish:tu.struct("Publish",{modules:tu.vector(tu.vector(tu.u8()).transform({input:e=>"string"==typeof e?(0,w.Ey)(e):e,output:e=>(0,w.nk)(new Uint8Array(e))})),dependencies:tu.vector(tl)}),MakeMoveVec:tu.struct("MakeMoveVec",{type:tu.enum("Option",{None:null,Some:tm}).transform({input:e=>null===e?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:tu.vector(ty)}),Upgrade:tu.struct("Upgrade",{modules:tu.vector(tu.vector(tu.u8()).transform({input:e=>"string"==typeof e?(0,w.Ey)(e):e,output:e=>(0,w.nk)(new Uint8Array(e))})),dependencies:tu.vector(tl),package:tl,ticket:ty})}),tw=tu.struct("ProgrammableTransaction",{inputs:tu.vector(tf),commands:tu.vector(tv)}),tk=tu.enum("TransactionKind",{ProgrammableTransaction:tw,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),tS=tu.enum("TransactionExpiration",{None:null,Epoch:tu.u64({name:"unsafe_u64"}).transform({input:e=>e,output:e=>Number(e)})}),tj=tu.struct("StructTag",{address:tl,module:tu.string(),name:tu.string(),typeParams:tu.vector(tg)}),tE=tu.struct("GasData",{payment:tu.vector(td),owner:tl,price:tu.u64(),budget:tu.u64()}),tO=tu.struct("TransactionDataV1",{kind:tk,sender:tl,gasData:tE,expiration:tS}),tI=tu.enum("TransactionData",{V1:tO}),tx=tu.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),tC=tu.enum("IntentVersion",{V0:null}),tM=tu.enum("AppId",{Sui:null}),tT=tu.struct("Intent",{scope:tx,version:tC,appId:tM});function tP(e){return tu.struct(`IntentMessage<${e.name}>`,{intent:tT,value:e})}let tA=tu.enum("CompressedSignature",{ED25519:tu.fixedArray(64,tu.u8()),Secp256k1:tu.fixedArray(64,tu.u8()),Secp256r1:tu.fixedArray(64,tu.u8()),ZkLogin:tu.vector(tu.u8())}),tU=tu.enum("PublicKey",{ED25519:tu.fixedArray(32,tu.u8()),Secp256k1:tu.fixedArray(33,tu.u8()),Secp256r1:tu.fixedArray(33,tu.u8()),ZkLogin:tu.vector(tu.u8())}),t$=tu.struct("MultiSigPkMap",{pubKey:tU,weight:tu.u8()}),tB=tu.struct("MultiSigPublicKey",{pk_map:tu.vector(t$),threshold:tu.u16()}),tN=tu.struct("MultiSig",{sigs:tu.vector(tA),bitmap:tu.u16(),multisig_pk:tB}),tz=tu.vector(tu.u8()).transform({input:e=>"string"==typeof e?(0,w.Ey)(e):e,output:e=>(0,w.nk)(new Uint8Array(e))}),tD=tu.struct("SenderSignedTransaction",{intentMessage:tP(tI),txSignatures:tu.vector(tz)}),tR=tu.vector(tD,{name:"SenderSignedData"}),t_=tu.struct("PasskeyAuthenticator",{authenticatorData:tu.vector(tu.u8()),clientDataJson:tu.string(),userSignature:tu.vector(tu.u8())}),tV=tu.enum("PackageUpgradeError",{UnableToFetchPackage:tu.struct("UnableToFetchPackage",{packageId:tl}),NotAPackage:tu.struct("NotAPackage",{objectId:tl}),IncompatibleUpgrade:null,DigestDoesNotMatch:tu.struct("DigestDoesNotMatch",{digest:tu.vector(tu.u8())}),UnknownUpgradePolicy:tu.struct("UnknownUpgradePolicy",{policy:tu.u8()}),PackageIDDoesNotMatch:tu.struct("PackageIDDoesNotMatch",{packageId:tl,ticketId:tl})}),tW=tu.struct("ModuleId",{address:tl,name:tu.string()}),tq=tu.struct("MoveLocation",{module:tW,function:tu.u16(),instruction:tu.u16(),functionName:tu.option(tu.string())}),tF=tu.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:tu.struct("IndexOutOfBounds",{idx:tu.u16()}),SecondaryIndexOutOfBounds:tu.struct("SecondaryIndexOutOfBounds",{resultIdx:tu.u16(),secondaryIdx:tu.u16()}),InvalidResultArity:tu.struct("InvalidResultArity",{resultIdx:tu.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),tL=tu.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),tG=tu.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:tu.struct("MoveObjectTooBig",{objectSize:tu.u64(),maxObjectSize:tu.u64()}),MovePackageTooBig:tu.struct("MovePackageTooBig",{objectSize:tu.u64(),maxObjectSize:tu.u64()}),CircularObjectOwnership:tu.struct("CircularObjectOwnership",{object:tl}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:tu.option(tq),MoveAbort:tu.tuple([tq,tu.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:tu.struct("CommandArgumentError",{argIdx:tu.u16(),kind:tF}),TypeArgumentError:tu.struct("TypeArgumentError",{argumentIdx:tu.u16(),kind:tL}),UnusedValueWithoutDrop:tu.struct("UnusedValueWithoutDrop",{resultIdx:tu.u16(),secondaryIdx:tu.u16()}),InvalidPublicFunctionReturnType:tu.struct("InvalidPublicFunctionReturnType",{idx:tu.u16()}),InvalidTransferObject:null,EffectsTooLarge:tu.struct("EffectsTooLarge",{currentSize:tu.u64(),maxSize:tu.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:tu.struct("PackageUpgradeError",{upgradeError:tV}),WrittenObjectsTooLarge:tu.struct("WrittenObjectsTooLarge",{currentSize:tu.u64(),maxSize:tu.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:tu.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:tu.vector(tl)}),AddressDeniedForCoin:tu.struct("AddressDeniedForCoin",{address:tl,coinType:tu.string()}),CoinTypeGlobalPause:tu.struct("CoinTypeGlobalPause",{coinType:tu.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),tH=tu.enum("ExecutionStatus",{Success:null,Failed:tu.struct("ExecutionFailed",{error:tG,command:tu.option(tu.u64())})}),tK=tu.struct("GasCostSummary",{computationCost:tu.u64(),storageCost:tu.u64(),storageRebate:tu.u64(),nonRefundableStorageFee:tu.u64()}),tJ=tu.enum("Owner",{AddressOwner:tl,ObjectOwner:tl,Shared:tu.struct("Shared",{initialSharedVersion:tu.u64()}),Immutable:null}),tY=tu.struct("TransactionEffectsV1",{status:tH,executedEpoch:tu.u64(),gasUsed:tK,modifiedAtVersions:tu.vector(tu.tuple([tl,tu.u64()])),sharedObjects:tu.vector(td),transactionDigest:tc,created:tu.vector(tu.tuple([td,tJ])),mutated:tu.vector(tu.tuple([td,tJ])),unwrapped:tu.vector(tu.tuple([td,tJ])),deleted:tu.vector(td),unwrappedThenDeleted:tu.vector(td),wrapped:tu.vector(td),gasObject:tu.tuple([td,tJ]),eventsDigest:tu.option(tc),dependencies:tu.vector(tc)}),tZ=tu.tuple([tu.u64(),tc]),tQ=tu.enum("ObjectIn",{NotExist:null,Exist:tu.tuple([tZ,tJ])}),tX=tu.enum("ObjectOut",{NotExist:null,ObjectWrite:tu.tuple([tc,tJ]),PackageWrite:tZ}),t0=tu.enum("IDOperation",{None:null,Created:null,Deleted:null}),t1=tu.struct("EffectsObjectChange",{inputState:tQ,outputState:tX,idOperation:t0}),t2=tu.enum("UnchangedSharedKind",{ReadOnlyRoot:tZ,MutateDeleted:tu.u64(),ReadDeleted:tu.u64(),Cancelled:tu.u64(),PerEpochConfig:null}),t6=tu.struct("TransactionEffectsV2",{status:tH,executedEpoch:tu.u64(),gasUsed:tK,transactionDigest:tc,gasObjectIndex:tu.option(tu.u32()),eventsDigest:tu.option(tc),dependencies:tu.vector(tc),lamportVersion:tu.u64(),changedObjects:tu.vector(tu.tuple([tl,t1])),unchangedSharedObjects:tu.vector(tu.tuple([tl,t2])),auxDataDigest:tu.option(tc)}),t8=tu.enum("TransactionEffects",{V1:tY,V2:t6}),t4={...tu,U8:tu.u8(),U16:tu.u16(),U32:tu.u32(),U64:tu.u64(),U128:tu.u128(),U256:tu.u256(),ULEB128:tu.uleb128(),Bool:tu.bool(),String:tu.string(),Address:tl,AppId:tM,Argument:ty,CallArg:tf,CompressedSignature:tA,GasData:tE,Intent:tT,IntentMessage:tP,IntentScope:tx,IntentVersion:tC,MultiSig:tN,MultiSigPkMap:t$,MultiSigPublicKey:tB,ObjectArg:tp,ObjectDigest:tc,ProgrammableMoveCall:tb,ProgrammableTransaction:tw,PublicKey:tU,SenderSignedData:tR,SenderSignedTransaction:tD,SharedObjectRef:th,StructTag:tj,SuiObjectRef:td,Command:tv,TransactionData:tI,TransactionDataV1:tO,TransactionExpiration:tS,TransactionKind:tk,TypeTag:tm,TransactionEffects:t8,PasskeyAuthenticator:t_};BigInt(1e9),(0,eb.fN)("0x6");function t3(e){if("string"==typeof e)switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw Error(`Unexpected type ${e}`)}if("Vector"in e)return{vector:t3(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(t3)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw Error(`Unexpected type ${JSON.stringify(e)}`)}async function t5(e,t,r){return await rr(e,t),await rt(e,t),t.onlyTransactionKind||(await t9(e,t),await t7(e,t),await re(e,t)),await function(e){e.inputs.forEach((e,t)=>{if("Object"!==e.$kind&&"Pure"!==e.$kind)throw Error(`Input at index ${t} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}(e),await r()}async function t9(e,t){e.gasConfig.price||(e.gasConfig.price=String(await ri(t).getReferenceGasPrice()))}async function t7(e,t){if(e.gasConfig.budget)return;let r=await ri(t).dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(5e10),payment:[]}}})});if("success"!==r.effects.status.status)throw Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});let n=1000n*BigInt(e.gasConfig.price||1n),i=BigInt(r.effects.gasUsed.computationCost)+n,s=i+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);e.gasConfig.budget=String(s>i?s:i)}async function re(e,t){if(!e.gasConfig.payment){let r=(await ri(t).getCoins({owner:e.gasConfig.owner||e.sender,coinType:"0x2::sui::SUI"})).data.filter(t=>!e.inputs.find(e=>!!e.Object?.ImmOrOwnedObject&&t.coinObjectId===e.Object.ImmOrOwnedObject.objectId)).map(e=>({objectId:e.coinObjectId,digest:e.digest,version:e.version}));if(!r.length)throw Error("No valid gas coins found for the transaction.");e.gasConfig.payment=r.map(e=>em(ej,e))}}async function rt(e,t){var r,n;let i=[...new Set(e.inputs.filter(e=>e.UnresolvedObject&&!(e.UnresolvedObject.version||e.UnresolvedObject?.initialSharedVersion)).map(e=>(0,eb.fN)(e.UnresolvedObject.objectId)))],s=i.length?(n=50,Array.from({length:Math.ceil((r=i).length/50)},(e,t)=>r.slice(t*n,t*n+n))):[],a=(await Promise.all(s.map(e=>ri(t).multiGetObjects({ids:e,options:{showOwner:!0}})))).flat(),o=Array.from(new Map(i.map((e,t)=>[e,a[t]]))).filter(([e,t])=>t.error).map(([e,t])=>JSON.stringify(t.error));if(o.length)throw Error(`The following input objects are invalid: ${o.join(", ")}`);let u=a.map(e=>{if(e.error||!e.data)throw Error(`Failed to fetch object: ${e.error}`);let t=e.data.owner,r=t&&"object"==typeof t&&"Shared"in t?t.Shared.initial_shared_version:null;return{objectId:e.data.objectId,digest:e.data.digest,version:e.data.version,initialSharedVersion:r}}),l=new Map(i.map((e,t)=>[e,u[t]]));for(let[t,r]of e.inputs.entries()){let n;if(!r.UnresolvedObject)continue;let i=(0,eb.t4)(r.UnresolvedObject.objectId),s=l.get(i);r.UnresolvedObject.initialSharedVersion??s?.initialSharedVersion?n=to.SharedObjectRef({objectId:i,initialSharedVersion:r.UnresolvedObject.initialSharedVersion||s?.initialSharedVersion,mutable:function(e,t){let r=!1;return e.getInputUses(t,(e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){let n=t.MoveCall.arguments.indexOf(e);r="&"!==t.MoveCall._argumentTypes[n].ref||r}("MakeMoveVec"===t.$kind||"MergeCoins"===t.$kind||"SplitCoins"===t.$kind)&&(r=!0)}),r}(e,t)}):function(e,t){let r=!1;return e.getInputUses(t,(e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){var n;let i=t.MoveCall.arguments.indexOf(e);r="object"==typeof(n=t.MoveCall._argumentTypes[i]).body&&"datatype"in n.body&&"0x2"===n.body.datatype.package&&"transfer"===n.body.datatype.module&&"Receiving"===n.body.datatype.type||r}}),r}(e,t)&&(n=to.ReceivingRef({objectId:i,digest:r.UnresolvedObject.digest??s?.digest,version:r.UnresolvedObject.version??s?.version})),e.inputs[e.inputs.indexOf(r)]=n??to.ObjectRef({objectId:i,digest:r.UnresolvedObject.digest??s?.digest,version:r.UnresolvedObject.version??s?.version})}}async function rr(e,t){let{inputs:r,commands:n}=e,i=[],s=new Set;n.forEach(t=>{if(t.MoveCall){if(t.MoveCall._argumentTypes)return;if(t.MoveCall.arguments.map(t=>"Input"===t.$kind?e.inputs[t.Input]:null).some(e=>e?.UnresolvedPure||e?.UnresolvedObject)){let e=`${t.MoveCall.package}::${t.MoveCall.module}::${t.MoveCall.function}`;s.add(e),i.push(t.MoveCall)}}switch(t.$kind){case"SplitCoins":t.SplitCoins.amounts.forEach(t=>{rn(t,t4.U64,e)});break;case"TransferObjects":rn(t.TransferObjects.address,t4.Address,e)}});let a=new Map;if(s.size>0){let e=ri(t);await Promise.all([...s].map(async t=>{let[r,n,i]=t.split("::"),s=await e.getNormalizedMoveFunction({package:r,module:n,function:i});a.set(t,s.parameters.map(e=>"object"==typeof e&&"Reference"in e?{ref:"&",body:t3(e.Reference)}:"object"==typeof e&&"MutableReference"in e?{ref:"&mut",body:t3(e.MutableReference)}:{ref:null,body:t3(e)}))}))}i.length&&await Promise.all(i.map(async e=>{let t=a.get(`${e.package}::${e.module}::${e.function}`);t&&(e._argumentTypes=t.length>0&&function(e){let t="object"==typeof e.body&&"datatype"in e.body?e.body.datatype:null;return!!t&&(0,eb.t4)(t.package)===(0,eb.t4)("0x2")&&"tx_context"===t.module&&"TxContext"===t.type}(t.at(-1))?t.slice(0,t.length-1):t)})),n.forEach(e=>{if(!e.MoveCall)return;let t=e.MoveCall,n=`${t.package}::${t.module}::${t.function}`,i=t._argumentTypes;if(i){if(i.length!==e.MoveCall.arguments.length)throw Error(`Incorrect number of arguments for ${n}`);i.forEach((e,n)=>{let i=t.arguments[n];if("Input"!==i.$kind)return;let s=r[i.Input];if(!s.UnresolvedPure&&!s.UnresolvedObject)return;let a=s.UnresolvedPure?.value??s.UnresolvedObject?.objectId,o=function e(t){if("string"==typeof t)switch(t){case"address":return t4.Address;case"bool":return t4.Bool;case"u8":return t4.U8;case"u16":return t4.U16;case"u32":return t4.U32;case"u64":return t4.U64;case"u128":return t4.U128;case"u256":return t4.U256;default:throw Error(`Unknown type signature ${t}`)}if("vector"in t){if("u8"===t.vector)return t4.vector(t4.U8).transform({input:e=>"string"==typeof e?new TextEncoder().encode(e):e,output:e=>e});let r=e(t.vector);return r?t4.vector(r):null}if("datatype"in t){let r=(0,eb.t4)(t.datatype.package);if(r===(0,eb.t4)("0x1")){if("ascii"===t.datatype.module&&"String"===t.datatype.type||"string"===t.datatype.module&&"String"===t.datatype.type)return t4.String;if("option"===t.datatype.module&&"Option"===t.datatype.type){let r=e(t.datatype.typeParameters[0]);return r?t4.vector(r):null}}if(r===(0,eb.t4)("0x2")&&"object"===t.datatype.module&&"ID"===t.datatype.type)return t4.Address}return null}(e.body);if(o){i.type="pure",r[r.indexOf(s)]=to.Pure(o.serialize(a));return}if("string"!=typeof a)throw Error(`Expect the argument to be an object id string, got ${JSON.stringify(a,null,2)}`);i.type="object";let u=s.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:a}}:s;r[i.Input]=u})}})}function rn(e,t,r){if("Input"!==e.$kind)return;let n=r.inputs[e.Input];"UnresolvedPure"===n.$kind&&(r.inputs[e.Input]=to.Pure(t.serialize(n.UnresolvedPure.value)))}function ri(e){if(!e.client)throw Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}function rs(e){switch(e){case"u8":return tu.u8();case"u16":return tu.u16();case"u32":return tu.u32();case"u64":return tu.u64();case"u128":return tu.u128();case"u256":return tu.u256();case"bool":return tu.bool();case"string":return tu.string();case"id":case"address":return tl}let t=e.match(/^(vector|option)<(.+)>$/);if(t){let[e,r]=t.slice(1);return"vector"===e?tu.vector(rs(r)):tu.option(rs(r))}throw Error(`Invalid Pure type name: ${e}`)}(0,eb.fN)("0x5");var ra=r(19989);let ro=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]);var ru=r(89881),rl=r(48701);let rc=Uint32Array.from([0xf3bcc908,0x6a09e667,0x84caa73b,0xbb67ae85,0xfe94f82b,0x3c6ef372,0x5f1d36f1,0xa54ff53a,0xade682d1,0x510e527f,0x2b3e6c1f,0x9b05688c,0xfb41bd6b,0x1f83d9ab,0x137e2179,0x5be0cd19]),rd=new Uint32Array(32);function rh(e,t,r,n,i,s){let a=i[s],o=i[s+1],u=rd[2*e],l=rd[2*e+1],c=rd[2*t],d=rd[2*t+1],h=rd[2*r],p=rd[2*r+1],f=rd[2*n],g=rd[2*n+1],m=rl.Vl(u,c,a);l=rl.Vr(m,l,d,o),u=0|m,({Dh:g,Dl:f}={Dh:g^l,Dl:f^u}),({Dh:g,Dl:f}={Dh:rl.R$(g,f),Dl:rl.R5(g,f)}),({h:p,l:h}=rl.WQ(p,h,g,f)),({Bh:d,Bl:c}={Bh:d^p,Bl:c^h}),({Bh:d,Bl:c}={Bh:rl.rE(d,c,24),Bl:rl.ry(d,c,24)}),rd[2*e]=u,rd[2*e+1]=l,rd[2*t]=c,rd[2*t+1]=d,rd[2*r]=h,rd[2*r+1]=p,rd[2*n]=f,rd[2*n+1]=g}function rp(e,t,r,n,i,s){let a=i[s],o=i[s+1],u=rd[2*e],l=rd[2*e+1],c=rd[2*t],d=rd[2*t+1],h=rd[2*r],p=rd[2*r+1],f=rd[2*n],g=rd[2*n+1],m=rl.Vl(u,c,a);l=rl.Vr(m,l,d,o),u=0|m,({Dh:g,Dl:f}={Dh:g^l,Dl:f^u}),({Dh:g,Dl:f}={Dh:rl.rE(g,f,16),Dl:rl.ry(g,f,16)}),({h:p,l:h}=rl.WQ(p,h,g,f)),({Bh:d,Bl:c}={Bh:d^p,Bl:c^h}),({Bh:d,Bl:c}={Bh:rl.qh(d,c,63),Bl:rl.Ei(d,c,63)}),rd[2*e]=u,rd[2*e+1]=l,rd[2*t]=c,rd[2*t+1]=d,rd[2*r]=h,rd[2*r+1]=p,rd[2*n]=f,rd[2*n+1]=g}class rf extends ra.Vw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,(0,ra.Fe)(e),(0,ra.Fe)(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=(0,ra.DH)(this.buffer)}update(e){(0,ra.CC)(this),e=(0,ra.ZJ)(e),(0,ra.DO)(e);let{blockLen:t,buffer:r,buffer32:n}=this,i=e.length,s=e.byteOffset,a=e.buffer;for(let o=0;o<i;){this.pos===t&&((0,ra.fd)(n),this.compress(n,0,!1),(0,ra.fd)(n),this.pos=0);let u=Math.min(t-this.pos,i-o),l=s+o;if(u===t&&!(l%4)&&o+u<i){let e=new Uint32Array(a,l,Math.floor((i-o)/4));(0,ra.fd)(e);for(let r=0;o+t<i;r+=n.length,o+=t)this.length+=t,this.compress(e,r,!1);(0,ra.fd)(e);continue}r.set(e.subarray(o,o+u),this.pos),this.pos+=u,this.length+=u,o+=u}return this}digestInto(e){(0,ra.CC)(this),(0,ra.Ht)(e,this);let{pos:t,buffer32:r}=this;this.finished=!0,(0,ra.uH)(this.buffer.subarray(t)),(0,ra.fd)(r),this.compress(r,0,!0),(0,ra.fd)(r);let n=(0,ra.DH)(e);this.get().forEach((e,t)=>n[t]=(0,ra.Y1)(e))}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){let{buffer:t,length:r,finished:n,destroyed:i,outputLen:s,pos:a}=this;return e||(e=new this.constructor({dkLen:s})),e.set(...this.get()),e.buffer.set(t),e.destroyed=i,e.finished=n,e.length=r,e.pos=a,e.outputLen=s,e}clone(){return this._cloneInto()}}class rg extends rf{constructor(e={}){let t=void 0===e.dkLen?64:e.dkLen;super(128,t),this.v0l=0|rc[0],this.v0h=0|rc[1],this.v1l=0|rc[2],this.v1h=0|rc[3],this.v2l=0|rc[4],this.v2h=0|rc[5],this.v3l=0|rc[6],this.v3h=0|rc[7],this.v4l=0|rc[8],this.v4h=0|rc[9],this.v5l=0|rc[10],this.v5h=0|rc[11],this.v6l=0|rc[12],this.v6h=0|rc[13],this.v7l=0|rc[14],this.v7h=0|rc[15],function(e,t={},r,n,i){if((0,ra.Fe)(64),e<0||e>64)throw Error("outputLen bigger than keyLen");let{key:s,salt:a,personalization:o}=t;if(void 0!==s&&(s.length<1||s.length>r))throw Error("key length must be undefined or 1.."+r);if(void 0!==a&&16!==a.length)throw Error("salt must be undefined or 16");if(void 0!==o&&16!==o.length)throw Error("personalization must be undefined or 16")}(t,e,64,16,16);let{key:r,personalization:n,salt:i}=e,s=0;if(void 0!==r&&(s=(r=(0,ra.ZJ)(r)).length),this.v0l^=this.outputLen|s<<8|0x1010000,void 0!==i){i=(0,ra.ZJ)(i);let e=(0,ra.DH)(i);this.v4l^=(0,ra.Y1)(e[0]),this.v4h^=(0,ra.Y1)(e[1]),this.v5l^=(0,ra.Y1)(e[2]),this.v5h^=(0,ra.Y1)(e[3])}if(void 0!==n){n=(0,ra.ZJ)(n);let e=(0,ra.DH)(n);this.v6l^=(0,ra.Y1)(e[0]),this.v6h^=(0,ra.Y1)(e[1]),this.v7l^=(0,ra.Y1)(e[2]),this.v7h^=(0,ra.Y1)(e[3])}if(void 0!==r){let e=new Uint8Array(this.blockLen);e.set(r),this.update(e)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:n,v2l:i,v2h:s,v3l:a,v3h:o,v4l:u,v4h:l,v5l:c,v5h:d,v6l:h,v6h:p,v7l:f,v7h:g}=this;return[e,t,r,n,i,s,a,o,u,l,c,d,h,p,f,g]}set(e,t,r,n,i,s,a,o,u,l,c,d,h,p,f,g){this.v0l=0|e,this.v0h=0|t,this.v1l=0|r,this.v1h=0|n,this.v2l=0|i,this.v2h=0|s,this.v3l=0|a,this.v3h=0|o,this.v4l=0|u,this.v4h=0|l,this.v5l=0|c,this.v5h=0|d,this.v6l=0|h,this.v6h=0|p,this.v7l=0|f,this.v7h=0|g}compress(e,t,r){this.get().forEach((e,t)=>rd[t]=e),rd.set(rc,16);let{h:n,l:i}=rl.F6(BigInt(this.length));rd[24]=rc[8]^i,rd[25]=rc[9]^n,r&&(rd[28]=~rd[28],rd[29]=~rd[29]);let s=0;for(let r=0;r<12;r++)rh(0,4,8,12,e,t+2*ro[s++]),rp(0,4,8,12,e,t+2*ro[s++]),rh(1,5,9,13,e,t+2*ro[s++]),rp(1,5,9,13,e,t+2*ro[s++]),rh(2,6,10,14,e,t+2*ro[s++]),rp(2,6,10,14,e,t+2*ro[s++]),rh(3,7,11,15,e,t+2*ro[s++]),rp(3,7,11,15,e,t+2*ro[s++]),rh(0,5,10,15,e,t+2*ro[s++]),rp(0,5,10,15,e,t+2*ro[s++]),rh(1,6,11,12,e,t+2*ro[s++]),rp(1,6,11,12,e,t+2*ro[s++]),rh(2,7,8,13,e,t+2*ro[s++]),rp(2,7,8,13,e,t+2*ro[s++]),rh(3,4,9,14,e,t+2*ro[s++]),rp(3,4,9,14,e,t+2*ro[s++]);this.v0l^=rd[0]^rd[16],this.v0h^=rd[1]^rd[17],this.v1l^=rd[2]^rd[18],this.v1h^=rd[3]^rd[19],this.v2l^=rd[4]^rd[20],this.v2h^=rd[5]^rd[21],this.v3l^=rd[6]^rd[22],this.v3h^=rd[7]^rd[23],this.v4l^=rd[8]^rd[24],this.v4h^=rd[9]^rd[25],this.v5l^=rd[10]^rd[26],this.v5h^=rd[11]^rd[27],this.v6l^=rd[12]^rd[28],this.v6h^=rd[13]^rd[29],this.v7l^=rd[14]^rd[30],this.v7h^=rd[15]^rd[31],(0,ra.uH)(rd)}destroy(){this.destroyed=!0,(0,ra.uH)(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let rm=(0,ra.ZG)(e=>new rg(e));function ry(e){return(0,eb.t4)(e).replace("0x","")}ru.yc;class rb{constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){let t=t4.TransactionKind.parse(e).ProgrammableTransaction;if(!t)throw Error("Unable to deserialize from bytes.");return rb.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:t.inputs,commands:t.commands})}static fromBytes(e){let t=t4.TransactionData.parse(e),r=t?.V1,n=r.kind.ProgrammableTransaction;if(!r||!n)throw Error("Unable to deserialize from bytes.");return rb.restore({version:2,sender:r.sender,expiration:r.expiration,gasData:r.gasData,inputs:n.inputs,commands:n.commands})}static restore(e){return 2===e.version?new rb(em(eB,e)):new rb(em(eB,em(eB,{version:2,sender:e.sender??null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:e.gasConfig.owner??null,budget:e.gasConfig.budget?.toString()??null,price:e.gasConfig.price?.toString()??null,payment:e.gasConfig.payment?.map(e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()}))??null},inputs:e.inputs.map(e=>{if("Input"===e.kind){if(X(eq,e.value)){let t=em(eq,e.value);if(t.Object){if(t.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:t.Object.ImmOrOwned.objectId,version:String(t.Object.ImmOrOwned.version),digest:t.Object.ImmOrOwned.digest}}};if(t.Object.Shared)return{Object:{SharedObject:{mutable:t.Object.Shared.mutable??null,initialSharedVersion:t.Object.Shared.initialSharedVersion,objectId:t.Object.Shared.objectId}}};if(t.Object.Receiving)return{Object:{Receiving:{digest:t.Object.Receiving.digest,version:String(t.Object.Receiving.version),objectId:t.Object.Receiving.objectId}}};throw Error("Invalid object input")}return{Pure:{bytes:(0,w.nk)(new Uint8Array(t.Pure))}}}return"object"===e.type?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw Error("Invalid input")}),commands:e.transactions.map(e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?e_.tagToString(e.type.Some):null,elements:e.objects.map(e=>e3(e))}};case"MergeCoins":return{MergeCoins:{destination:e3(e.destination),sources:e.sources.map(e=>e3(e))}};case"MoveCall":{let[t,r,n]=e.target.split("::");return{MoveCall:{package:t,module:r,function:n,typeArguments:e.typeArguments,arguments:e.arguments.map(e=>e3(e))}}}case"Publish":return{Publish:{modules:e.modules.map(e=>(0,w.nk)(Uint8Array.from(e))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:e3(e.coin),amounts:e.amounts.map(e=>e3(e))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map(e=>e3(e)),address:e3(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map(e=>(0,w.nk)(Uint8Array.from(e))),dependencies:e.dependencies,package:e.packageId,ticket:e3(e.ticket)}}}throw Error(`Unknown transaction ${Object.keys(e)}`)})})))}static getDigestFromBytes(e){let t=function(e,t){let r=Array.from(`${e}::`).map(e=>e.charCodeAt(0)),n=new Uint8Array(r.length+t.length);return n.set(r),n.set(t,r.length),rm(n,{dkLen:32})}("TransactionData",e);return(0,k.gT)(t)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:t,onlyTransactionKind:r}={}){let n=this.inputs,i=this.commands;if(r)return t4.TransactionKind.serialize({ProgrammableTransaction:{inputs:n,commands:i}},{maxSize:e}).toBytes();let s=t?.expiration??this.expiration,a=t?.sender??this.sender,o={...this.gasData,...t?.gasConfig,...t?.gasData};if(!a)throw Error("Missing transaction sender");if(!o.budget)throw Error("Missing gas budget");if(!o.payment)throw Error("Missing gas payment");if(!o.price)throw Error("Missing gas price");let u={sender:ry(a),expiration:s||{None:!0},gasData:{payment:o.payment,owner:ry(this.gasData.owner??a),price:BigInt(o.price),budget:BigInt(o.budget)},kind:{ProgrammableTransaction:{inputs:n,commands:i}}};return t4.TransactionData.serialize({V1:u},{maxSize:e}).toBytes()}addInput(e,t){let r=this.inputs.length;return this.inputs.push(t),{Input:r,type:e,$kind:"Input"}}getInputUses(e,t){this.mapArguments((r,n)=>("Input"===r.$kind&&r.Input===e&&t(r,n),r))}mapArguments(e){for(let t of this.commands)switch(t.$kind){case"MoveCall":t.MoveCall.arguments=t.MoveCall.arguments.map(r=>e(r,t));break;case"TransferObjects":t.TransferObjects.objects=t.TransferObjects.objects.map(r=>e(r,t)),t.TransferObjects.address=e(t.TransferObjects.address,t);break;case"SplitCoins":t.SplitCoins.coin=e(t.SplitCoins.coin,t),t.SplitCoins.amounts=t.SplitCoins.amounts.map(r=>e(r,t));break;case"MergeCoins":t.MergeCoins.destination=e(t.MergeCoins.destination,t),t.MergeCoins.sources=t.MergeCoins.sources.map(r=>e(r,t));break;case"MakeMoveVec":t.MakeMoveVec.elements=t.MakeMoveVec.elements.map(r=>e(r,t));break;case"Upgrade":t.Upgrade.ticket=e(t.Upgrade.ticket,t);break;case"$Intent":let r=t.$Intent.inputs;for(let[n,i]of(t.$Intent.inputs={},Object.entries(r)))t.$Intent.inputs[n]=Array.isArray(i)?i.map(r=>e(r,t)):e(i,t);break;case"Publish":break;default:throw Error(`Unexpected transaction kind: ${t.$kind}`)}}replaceCommand(e,t){if(!Array.isArray(t)){this.commands[e]=t;return}let r=t.length-1;this.commands.splice(e,1,...t),0!==r&&this.mapArguments(t=>{switch(t.$kind){case"Result":t.Result>e&&(t.Result+=r);break;case"NestedResult":t.NestedResult[0]>e&&(t.NestedResult[0]+=r)}return t})}getDigest(){let e=this.build({onlyTransactionKind:!1});return rb.getDigestFromBytes(e)}snapshot(){return em(eB,this)}}function rv(e){return"string"==typeof e?(0,eb.t4)(e):e.Object?e.Object.ImmOrOwnedObject?(0,eb.t4)(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?(0,eb.t4)(e.Object.Receiving.objectId):(0,eb.t4)(e.Object.SharedObject.objectId):e.UnresolvedObject?(0,eb.t4)(e.UnresolvedObject.objectId):void 0}var rw=e=>{throw TypeError(e)},rk=(e,t,r)=>t.has(e)||rw("Cannot "+r),rS=(e,t,r)=>(rk(e,t,"read from private field"),r?r.call(e):t.get(e)),rj=(e,t,r)=>t.has(e)?rw("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),rE=(e,t,r,n)=>(rk(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),rO=(e,t,r)=>(rk(e,t,"access private method"),r);function rI(e,t=1/0){let r=[],n=t=>r[t]??(r[t]={$kind:"NestedResult",NestedResult:[e,t]});return new Proxy({$kind:"Result",Result:e},{set(){throw Error("The transaction result is a proxy, and does not support setting properties directly")},get(e,r){if(r in e)return Reflect.get(e,r);if(r===Symbol.iterator)return function*(){let e=0;for(;e<t;)yield n(e),e++};if("symbol"==typeof r)return;let i=parseInt(r,10);if(!Number.isNaN(i)&&!(i<0))return n(i)}})}let rx=Symbol.for("@mysten/transaction");function rC(e){return!!e&&"object"==typeof e&&!0===e[rx]}let rM={buildPlugins:new Map,serializationPlugins:new Map},rT=Symbol.for("@mysten/transaction/registry");function rP(){try{let e=globalThis;return e[rT]||(e[rT]=rM),e[rT]}catch(e){return rM}}let rA=class e{constructor(){rj(this,g),rj(this,d),rj(this,h),rj(this,p,new Map),rj(this,f),this.object=function(e){function t(t){return e(t)}return t.system=()=>e("0x5"),t.clock=()=>e("0x6"),t.random=()=>e("0x8"),t.denyList=()=>e("0x403"),t.option=({type:e,value:t})=>r=>r.moveCall({typeArguments:[e],target:`0x1::option::${null===t?"none":"some"}`,arguments:null===t?[]:[r.object(t)]}),t}(e=>{if("function"==typeof e)return this.object(e(this));if("object"==typeof e&&X(eE,e))return e;let t=rv(e),r=rS(this,f).inputs.find(e=>t===rv(e));return r?.Object?.SharedObject&&"object"==typeof e&&e.Object?.SharedObject&&(r.Object.SharedObject.mutable=r.Object.SharedObject.mutable||e.Object.SharedObject.mutable),r?{$kind:"Input",Input:rS(this,f).inputs.indexOf(r),type:"object"}:rS(this,f).addInput("object","string"==typeof e?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:(0,eb.t4)(e)}}:e)});let e=rP();rE(this,f,new rb),rE(this,h,[...e.buildPlugins.values()]),rE(this,d,[...e.serializationPlugins.values()])}static fromKind(t){let r=new e;return rE(r,f,rb.fromKindBytes("string"==typeof t?(0,w.Ey)(t):t)),r}static from(t){let r=new e;return rC(t)?rE(r,f,new rb(t.getData())):"string"==typeof t&&t.startsWith("{")?rE(r,f,rb.restore(JSON.parse(t))):rE(r,f,rb.fromBytes("string"==typeof t?(0,w.Ey)(t):t)),r}static registerGlobalSerializationPlugin(e,t){rP().serializationPlugins.set(e,t??e)}static unregisterGlobalSerializationPlugin(e){rP().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,t){rP().buildPlugins.set(e,t??e)}static unregisterGlobalBuildPlugin(e){rP().buildPlugins.delete(e)}addSerializationPlugin(e){rS(this,d).push(e)}addBuildPlugin(e){rS(this,h).push(e)}addIntentResolver(e,t){if(rS(this,p).has(e)&&rS(this,p).get(e)!==t)throw Error(`Intent resolver for ${e} already exists`);rS(this,p).set(e,t)}setSender(e){rS(this,f).sender=e}setSenderIfNotSet(e){rS(this,f).sender||(rS(this,f).sender=e)}setExpiration(e){rS(this,f).expiration=e?em(e$,e):null}setGasPrice(e){rS(this,f).gasConfig.price=String(e)}setGasBudget(e){rS(this,f).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){null==rS(this,f).gasData.budget&&(rS(this,f).gasConfig.budget=String(e))}setGasOwner(e){rS(this,f).gasConfig.owner=e}setGasPayment(e){rS(this,f).gasConfig.payment=e.map(e=>em(ej,e))}get blockData(){return e8(rS(this,f).snapshot())}getData(){return rS(this,f).snapshot()}get[rx](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:function(e){function t(t,r){if("string"==typeof t)return e(rs(t).serialize(r));if(t instanceof Uint8Array||$(t))return e(t);throw Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return t.u8=t=>e(t4.U8.serialize(t)),t.u16=t=>e(t4.U16.serialize(t)),t.u32=t=>e(t4.U32.serialize(t)),t.u64=t=>e(t4.U64.serialize(t)),t.u128=t=>e(t4.U128.serialize(t)),t.u256=t=>e(t4.U256.serialize(t)),t.bool=t=>e(t4.Bool.serialize(t)),t.string=t=>e(t4.String.serialize(t)),t.address=t=>e(t4.Address.serialize(t)),t.id=t.address,t.vector=(t,r)=>e(t4.vector(rs(t)).serialize(r)),t.option=(t,r)=>e(t4.option(rs(t)).serialize(r)),t}(e=>$(e)?rS(this,f).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):rS(this,f).addInput("pure",X(eU,e)?em(eU,e):e instanceof Uint8Array?to.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(to.ObjectRef(...e))}receivingRef(...e){return this.object(to.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(to.SharedObjectRef(...e))}add(e){return"function"==typeof e?e(this):rI(rS(this,f).commands.push(e)-1)}splitCoins(e,t){let r=ez.SplitCoins("string"==typeof e?this.object(e):rO(this,g,y).call(this,e),t.map(e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e?this.pure.u64(e):rO(this,g,m).call(this,e)));return rI(rS(this,f).commands.push(r)-1,t.length)}mergeCoins(e,t){return this.add(ez.MergeCoins(this.object(e),t.map(e=>this.object(e))))}publish({modules:e,dependencies:t}){return this.add(ez.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,package:r,ticket:n}){return this.add(ez.Upgrade({modules:e,dependencies:t,package:r,ticket:this.object(n)}))}moveCall({arguments:e,...t}){return this.add(ez.MoveCall({...t,arguments:e?.map(e=>rO(this,g,m).call(this,e))}))}transferObjects(e,t){return this.add(ez.TransferObjects(e.map(e=>this.object(e)),"string"==typeof t?this.pure.address(t):rO(this,g,m).call(this,t)))}makeMoveVec({type:e,elements:t}){return this.add(ez.MakeMoveVec({type:e,elements:t.map(e=>this.object(e))}))}serialize(){return JSON.stringify(e8(rS(this,f).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(em(ta,rS(this,f).snapshot()),(e,t)=>"bigint"==typeof t?t.toString():t,2)}async sign(e){let{signer:t,...r}=e,n=await this.build(r);return t.signTransaction(n)}async build(e={}){return await this.prepareForSerialization(e),await rO(this,g,b).call(this,e),rS(this,f).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await rO(this,g,b).call(this,e),rS(this,f).getDigest()}async prepareForSerialization(e){let t=new Set;for(let e of rS(this,f).commands)e.$Intent&&t.add(e.$Intent.name);let r=[...rS(this,d)];for(let n of t)if(!e.supportedIntents?.includes(n)){if(!rS(this,p).has(n))throw Error(`Missing intent resolver for ${n}`);r.push(rS(this,p).get(n))}await rO(this,g,v).call(this,r,e)}};d=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakSet,m=function(e){return $(e)?this.pure(e):rO(this,g,y).call(this,e)},y=function(e){return"function"==typeof e?em(eE,e(this)):em(eE,e)},b=async function(e){if(!e.onlyTransactionKind&&!rS(this,f).sender)throw Error("Missing transaction sender");await rO(this,g,v).call(this,[...rS(this,h),t5],e)},v=async function(e,t){let r=n=>{if(n>=e.length)return()=>{};let i=e[n];return async()=>{let e=r(n+1),s=!1,a=!1;if(await i(rS(this,f),t,async()=>{if(s)throw Error(`next() was call multiple times in TransactionPlugin ${n}`);s=!0,await e(),a=!0}),!s)throw Error(`next() was not called in TransactionPlugin ${n}`);if(!a)throw Error(`next() was not awaited in TransactionPlugin ${n}`)}};await r(0)()};let rU=rA},94606:(e,t,r)=>{let n,i;r.d(t,{Nu:()=>ey,ty:()=>em});var s,a,o,u,l,c,d,h,p,f,g,m,y,b,v,w=r(43589),k=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},S=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};let j=new Set,E={};function O(...e){return(e=e.filter(e=>!j.has(e))).length?(e.forEach(e=>{n=void 0,j.add(e)}),E.register?.forEach(t=>C(()=>t(...e))),function(){e.forEach(e=>{n=void 0,j.delete(e)}),E.unregister?.forEach(t=>C(()=>t(...e)))}):()=>{}}function I(){return n||(n=[...j]),n}function x(e,t){return E[e]?.push(t)||(E[e]=[t]),function(){E[e]=E[e]?.filter(e=>t!==e)}}function C(e){try{e()}catch(e){console.error(e)}}class M extends Event{get detail(){return k(this,s,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),s.set(this,void 0),S(this,s,e,"f")}preventDefault(){throw Error("preventDefault cannot be called")}stopImmediatePropagation(){throw Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw Error("stopPropagation cannot be called")}}s=new WeakMap;var T=r(23389),P=r(99058);function A(e,t,r,n){return new(r||(r=Promise))(function(i,s){function a(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,o)}u((n=n.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;var U=r(18660),$=r(56572),B=r(54481),N=r(88784),z=r(25616);let D=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,R=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,_={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class V extends Error{}class W extends V{constructor(e,t){super(e),this.code=t,this.type=_[t]??"ServerError"}}class q extends V{constructor(e,t,r){super(e),this.status=t,this.statusText=r}}var F=e=>{throw TypeError(e)},L=(e,t,r)=>t.has(e)||F("Cannot "+r),G=(e,t,r)=>(L(e,t,"read from private field"),r?r.call(e):t.get(e)),H=(e,t,r)=>t.has(e)?F("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),K=(e,t,r,n)=>(L(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),J=(e,t,r)=>(L(e,t,"access private method"),r),Y=(e,t,r,n)=>({set _(value){K(e,t,value,r)},get _(){return G(e,t,n)}});let Z={WebSocketConstructor:"undefined"!=typeof WebSocket?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class Q{constructor(e,t={}){if(H(this,h),H(this,a,0),H(this,o,0),H(this,u,null),H(this,l,null),H(this,c,new Set),H(this,d,new Map),this.endpoint=e,this.options={...Z,...t},!this.options.WebSocketConstructor)throw Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=function(e){let t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}(this.endpoint))}async makeRequest(e,t){let r=await J(this,h,p).call(this);return new Promise((n,i)=>{K(this,a,G(this,a)+1),G(this,d).set(G(this,a),{resolve:n,reject:i,timeout:setTimeout(()=>{G(this,d).delete(G(this,a)),i(Error(`Request timeout: ${e}`))},this.options.callTimeout)}),r.send(JSON.stringify({jsonrpc:"2.0",id:G(this,a),method:e,params:t}))}).then(({error:e,result:t})=>{if(e)throw new W(e.message,e.code);return t})}async subscribe(e){let t=new X(e);return G(this,c).add(t),await t.subscribe(this),()=>t.unsubscribe(this)}}a=new WeakMap,o=new WeakMap,u=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakSet,p=function(){return G(this,l)||K(this,l,new Promise(e=>{G(this,u)?.close(),K(this,u,new this.options.WebSocketConstructor(this.endpoint)),G(this,u).addEventListener("open",()=>{K(this,o,0),e(G(this,u))}),G(this,u).addEventListener("close",()=>{Y(this,o)._++,G(this,o)<=this.options.maxReconnects&&setTimeout(()=>{J(this,h,f).call(this)},this.options.reconnectTimeout)}),G(this,u).addEventListener("message",({data:e})=>{let t;try{t=JSON.parse(e)}catch(t){console.error(Error(`Failed to parse RPC message: ${e}`,{cause:t}));return}if("id"in t&&null!=t.id&&G(this,d).has(t.id)){let{resolve:e,timeout:r}=G(this,d).get(t.id);clearTimeout(r),e(t)}else if("params"in t){let{params:e}=t;G(this,c).forEach(t=>{t.subscriptionId===e.subscription&&e.subscription===t.subscriptionId&&t.onMessage(e.result)})}})})),G(this,l)},f=async function(){return G(this,u)?.close(),K(this,l,null),Promise.allSettled([...G(this,c)].map(e=>e.subscribe(this)))};class X{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){let{subscriptionId:t}=this;return this.subscribed=!1,null!=t&&(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[t]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;let t=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=t)}}var ee=e=>{throw TypeError(e)},et=(e,t,r)=>t.has(e)||ee("Cannot "+r),er=(e,t,r)=>(et(e,t,"read from private field"),r?r.call(e):t.get(e)),en=(e,t,r)=>t.has(e)?ee("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ei=(e,t,r,n)=>(et(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),es=(e,t,r)=>(et(e,t,"access private method"),r);class ea{constructor(e){en(this,b),en(this,g,0),en(this,m),en(this,y),ei(this,m,e)}fetch(e,t){let r=er(this,m).fetch??fetch;if(!r)throw Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return r(e,t)}async request(e){ei(this,g,er(this,g)+1);let t=await this.fetch(er(this,m).rpc?.url??er(this,m).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":"1.24.0","Client-Target-Api-Version":"1.45.0","Client-Request-Method":e.method,...er(this,m).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:er(this,g),method:e.method,params:e.params})});if(!t.ok)throw new q(`Unexpected status code: ${t.status}`,t.status,t.statusText);let r=await t.json();if("error"in r&&null!=r.error)throw new W(r.error.message,r.error.code);return r.result}async subscribe(e){let t=await es(this,b,v).call(this).subscribe(e);return async()=>!!await t()}}g=new WeakMap,m=new WeakMap,y=new WeakMap,b=new WeakSet,v=function(){if(!er(this,y)){let e=er(this,m).WebSocketConstructor??WebSocket;if(!e)throw Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");ei(this,y,new Q(er(this,m).websocket?.url??er(this,m).url,{WebSocketConstructor:e,...er(this,m).websocket}))}return er(this,y)};let eo=Symbol.for("@mysten/SuiClient");class eu{get[eo](){return!0}constructor(e){this.transport=e.transport??new ea({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!(0,z.AP)((0,z.t4)(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!(0,z.AP)((0,z.t4)(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!(0,z.AP)((0,z.t4)(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!(0,z.AP)((0,z.t4)(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,t){return await this.transport.request({method:e,params:t})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!(0,z.AP)((0,z.t4)(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!(0,z.qD)((0,z.fN)(e.id)))throw Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(e=>{if(!e||!(0,z.qD)((0,z.fN)(e)))throw Error(`Invalid Sui Object id ${e}`)}),e.ids.length!==new Set(e.ids).size)throw Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,"descending"===(e.order||"descending")]})}async getTransactionBlock(e){if(!(0,z.n4)(e.digest))throw Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(e=>{if(!(0,z.n4)(e))throw Error(`Invalid Transaction digest ${e}`)}),e.digests.length!==new Set(e.digests).size)throw Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:t,options:r,requestType:n}){let i=await this.transport.request({method:"sui_executeTransactionBlock",params:["string"==typeof e?e:(0,U.nk)(e),Array.isArray(t)?t:[t],r]});if("WaitForLocalExecution"===n)try{await this.waitForTransaction({digest:i.digest})}catch(e){}return i}async signAndExecuteTransaction({transaction:e,signer:t,...r}){let n;e instanceof Uint8Array?n=e:(e.setSenderIfNotSet(t.toSuiAddress()),n=await e.build({client:this}));let{signature:i,bytes:s}=await t.signTransaction(n);return this.executeTransactionBlock({transactionBlock:s,signature:i,...r})}async getTotalTransactionBlocks(){return BigInt(await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]}))}async getReferenceGasPrice(){return BigInt(await this.transport.request({method:"suix_getReferenceGasPrice",params:[]}))}async getStakes(e){if(!e.owner||!(0,z.AP)((0,z.t4)(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(e=>{if(!e||!(0,z.qD)((0,z.fN)(e)))throw Error(`Invalid Sui Stake id ${e}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,"descending"===(e.order||"descending")]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){let t;if((0,N.b)(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),t=(0,U.nk)(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if("string"==typeof e.transactionBlock)t=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)t=(0,U.nk)(e.transactionBlock);else throw Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,t,e.gasPrice?.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:["string"==typeof e.transactionBlock?e.transactionBlock:(0,U.nk)(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!(0,z.qD)((0,z.fN)(e.parentId)))throw Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){return String(await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]}))}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){let e=await this.getCheckpoint({id:"0"}),t=(0,$.n3)(e.digest);return(0,B.nj)(t.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...t}){let{nextCursor:r,hasNextPage:n,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[t.address,t.cursor,t.limit]});return{hasNextPage:n,nextCursor:r,data:i.map(t=>(function(e,t="at"){let r;let n=e.toLowerCase();if(n.includes("@")){if(!D.test(n))throw Error(`Invalid SuiNS name ${e}`);let[t,i]=n.split("@");r=[...t?t.split("."):[],i]}else{if(!R.test(n))throw Error(`Invalid SuiNS name ${e}`);r=n.split(".").slice(0,-1)}return"dot"===t?`${r.join(".")}.sui`:`${r.slice(0,-1).join(".")}@${r[r.length-1]}`})(t,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version]})}async waitForTransaction({signal:e,timeout:t=6e4,pollInterval:r=2e3,...n}){let i=AbortSignal.timeout(t),s=new Promise((e,t)=>{i.addEventListener("abort",()=>t(i.reason))});for(s.catch(()=>{});!i.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(n)}catch(e){await Promise.race([new Promise(e=>setTimeout(e,r)),s])}}throw i.throwIfAborted(),Error("Unexpected error while waiting for transaction block.")}}var el=r(59346);class ec extends T.uW{sendBalance(e){return A(this,arguments,void 0,function*(e){var t;let{amount:r,toAddress:n}=e;yield this._connector.connect();let i=yield this._connector.getWalletAccount(),s=null==i?void 0:i.chains[0];if(!i)throw new P.ii("Unable to retrieve Sui wallet account");if(!s)throw new P.ii("Unable to retrieve Sui active network");let a=null===(t=this._connector.getFeatures())||void 0===t?void 0:t["sui:signAndExecuteTransaction"];if(!a)throw new P.ii("Wallet does not support sui:signAndExecuteTransaction");let o=new N.Z,u=1e9*Number(r);o.setGasPrice(1e3),o.setGasBudget(1e7);let[l]=o.splitCoins(o.gas,[u]);o.transferObjects([l],n);let{bytes:c}=yield a.signAndExecuteTransaction({account:i,chain:s,transaction:o});return c})}getWalletClient(){return A(this,void 0,void 0,function*(){return this._connector.getWalletClient()})}getWalletAccount(){return A(this,void 0,void 0,function*(){return this._connector.getWalletAccount()})}getActiveNetwork(){return A(this,void 0,void 0,function*(){let e=yield this._connector.getWalletAccount();return null==e?void 0:e.chains[0]})}signTransaction(e){return A(this,void 0,void 0,function*(){var t;yield this._connector.connect();let r=yield this._connector.getWalletAccount(),n=null==r?void 0:r.chains[0];if(!r)throw new P.ii("Unable to retrieve Sui wallet account");if(!n)throw new P.ii("Unable to retrieve Sui active network");let i=null===(t=this._connector.getFeatures())||void 0===t?void 0:t["sui:signTransaction"];if(!i)throw new P.ii("Wallet does not support sui:signTransaction");return yield i.signTransaction({account:r,chain:n,transaction:e})})}}let ed=(e,t)=>{var r;let n=e.split(":").pop();if(!n)return;let i=null===(r=t.find(e=>e.name.toLowerCase().includes(n.toLowerCase())))||void 0===r?void 0:r.chainId;return i?String(i):void 0},eh=e=>{var t,r,n;return null!==(r=null===(t=e.privateCustomerRpcUrls)||void 0===t?void 0:t[0])&&void 0!==r?r:null===(n=e.rpcUrls)||void 0===n?void 0:n[0]};class ep extends T.gy{getFeatures(){var e;return null===(e=this.wallet)||void 0===e?void 0:e.features}connect(){return A(this,arguments,void 0,function*(){var e,t;let{silent:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.account)return;let n=null===(e=this.getFeatures())||void 0===e?void 0:e["standard:connect"];if(!n){if(r)return;throw new P.ii("Wallet does not support standard:connect")}this.logger.debug("[connect] Creating new connection");try{let e=yield n.connect(r?{silent:r}:void 0);this.logger.debug("[connect] Connection returned accounts: ".concat(null==e?void 0:e.accounts.length)),this.account=null==e?void 0:e.accounts[0];let i=null===(t=this.account)||void 0===t?void 0:t.chains[0];i&&(this.activeNetworkId=ed(i,this.suiNetworks))}catch(e){if(this.logger.error(e),r)return;throw new P.ii("Connection failed")}this.setupEventListeners()})}getAddress(){return A(this,void 0,void 0,function*(){if(this.logger.debug("[getAddress] called, attempting to obtain the account address"),yield this.connect(),!this.account)throw new P.ii("No account found");return this.account.address})}getNetwork(){return A(this,void 0,void 0,function*(){return this.account||(yield this.connect()),this.activeNetworkId})}getConnectedAccounts(){return A(this,void 0,void 0,function*(){var e;this.account||(yield this.connect({silent:!0}));let t=null===(e=this.account)||void 0===e?void 0:e.address;return t?[t]:[]})}getChainFromEvent(e){var t,r,n,i,s;let a=null===(t=e.chains)||void 0===t?void 0:t[0];return(a||(a=null===(i=null===(n=null===(r=e.accounts)||void 0===r?void 0:r[0])||void 0===n?void 0:n.chains)||void 0===i?void 0:i[0]),a&&null!==(s=ed(a,this.suiNetworks))&&void 0!==s)?s:"-1"}setupEventListeners(){var e;if(!this.canSetEventListeners||this.eventsHandler)return;let t=null===(e=this.getFeatures())||void 0===e?void 0:e["standard:events"];if(!t){this.logger.debug("[setupEventListeners] Wallet not connected or does not support standard:events");return}this.eventsHandler=e=>A(this,void 0,void 0,function*(){var t;if(e.accounts){if(0===e.accounts.length&&this.account){this.account=void 0,this.emit("disconnect");return}let[r]=e.accounts;r.address!==(null===(t=this.account)||void 0===t?void 0:t.address)&&(this.account=r,this.emit("accountChange",{accounts:[r.address]}))}let r=this.getChainFromEvent(e);r!==this.activeNetworkId&&(this.activeNetworkId=r,this.emit("chainChange",{chain:r}))}),this.logger.debug("[setupEventListeners] Setting up sui wallet connector event listeners"),this.eventsUnsubscribeHandler=t.on("change",this.eventsHandler)}getWalletClient(e){return A(this,void 0,void 0,function*(){let t=null!=e?e:yield this.getNetwork();if(!t){this.logger.error("[getWalletClient] Failed to get network id");return}if(this.suiClients[t])return this.suiClients[t];let r=this.getEnabledNetworks().find(e=>e.networkId===t),n=r?eh(r):void 0;if(!n){this.logger.error("[getWalletClient] Failed to get network url");return}return this.suiClients[t]=new eu({url:n}),this.suiClients[t]})}getBalance(e){return A(this,void 0,void 0,function*(){let t=yield this.getWalletClient();if(!t){this.logger.error("[getBalance] Failed to get Sui client");return}let r=yield t.getBalance({owner:e}),n=Number(null==r?void 0:r.totalBalance)/1e9;if(Number.isNaN(n)){this.logger.error("[getBalance] Failed to get balance for address: ".concat(e));return}return n.toFixed(6)})}signMessage(e){return A(this,void 0,void 0,function*(){var t;let r;this.logger.debug("[signMessage] called, attempting to sign a message");let n=null===(t=this.getFeatures())||void 0===t?void 0:t["sui:signPersonalMessage"];if(!n)throw new P.ii("Wallet does not support sui:signPersonalMessage");if(yield this.connect(),!this.account)throw new P.ii("[signMessage] No account found");try{r=yield n.signPersonalMessage({account:this.account,message:new TextEncoder().encode(e)})}catch(e){throw this.logger.error(e),new P.ii("An error occured during signing")}if(!r||!r.signature)throw new P.ii("[signMessage] Failed to sign message");return this.logger.debug("[signMessage] Signed message: ".concat(r.signature)),r.signature})}getWalletAccount(){return A(this,void 0,void 0,function*(){return this.account})}teardownEventListeners(){return A(this,void 0,void 0,function*(){this.eventsUnsubscribeHandler&&(this.eventsUnsubscribeHandler(),this.eventsUnsubscribeHandler=void 0)})}endSession(){return A(this,void 0,void 0,function*(){var e;this.teardownEventListeners(),this.account=void 0;let t=null===(e=this.getFeatures())||void 0===e?void 0:e["standard:disconnect"];if(t){yield t.disconnect();return}if(this.wallet.disconnect){yield this.wallet.disconnect();return}throw new P.ii("Wallet does not support disconnect")})}getEnabledNetworks(){return this.suiNetworks}constructor(e,t){super(t),this.name="Sui",this.ChainWallet=ec,this.connectedChain="SUI",this.supportedChains=["SUI"],this.switchNetworkOnlyFromWallet=!0,this.canSetEventListeners=!0,this.suiClients={},this.name=e,this.wallet=t.wallet,this.chainRpcProviders=t.chainRpcProviders,this.suiNetworks=t.suiNetworks,this.logger=new el.V(this.name)}}class ef extends ep{isInstalledOnBrowser(){return this._isInstalledOnBrowser}constructor(e,t,r){super(e,r),this._isInstalledOnBrowser=t,this.overrideKey=r.overrideKey}}let eg=e=>{var t;let{walletBook:r}=e,n=(function(){if(i||(i=Object.freeze({register:O,get:I,on:x}),"undefined"==typeof window))return i;let e=Object.freeze({register:O});try{window.addEventListener("wallet-standard:register-wallet",({detail:t})=>t(e))}catch(e){console.error("wallet-standard:register-wallet event listener could not be added\n",e)}try{window.dispatchEvent(new M(e))}catch(e){console.error("wallet-standard:app-ready event could not be dispatched\n",e)}return i})().get(),s=Object.fromEntries(n.filter(e=>{var t;return null===(t=e.features)||void 0===t?void 0:t["sui:signPersonalMessage"]}).map(e=>[e.name,e]));return[...Object.entries(null!==(t=null==r?void 0:r.wallets)&&void 0!==t?t:{}).filter(e=>{var t,r;let[,n]=e,i=null===(t=n.injectedConfig)||void 0===t?void 0:t.find(e=>"sui"===e.chain),a=!!i,o=null===(r=null==i?void 0:i.walletStandard)||void 0===r?void 0:r.name,u=o&&s[o];return a&&!u}).map(e=>{let[t,n]=e,i=(0,T.fE)({walletBook:r,walletBookWallet:n,walletKey:t});return class extends ef{constructor(e){super(n.name,!1,Object.assign({metadata:i,overrideKey:t,wallet:n,walletBookEntry:n},e))}}}),...n.filter(e=>{var t;return null===(t=e.features)||void 0===t?void 0:t["sui:signPersonalMessage"]}).map(e=>{let t=(0,P.rh)(e.name);return class extends ef{constructor(r){super(e.name,!0,Object.assign({metadata:{groupKey:t,icon:e.icon,id:e.name,name:e.name},name:e.name,overrideKey:"".concat(t,"sui"),wallet:e},r))}}})]},em=e=>"SUI"===e.chain;(0,w.R)("@dynamic-labs/sui","4.10.1");let ey=e=>[...eg(e)]}}]);